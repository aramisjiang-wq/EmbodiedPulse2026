# åˆ·æ–°åŠŸèƒ½è„šæœ¬è°ƒç”¨æ–¹æ¡ˆ

**åˆ›å»ºæ—¶é—´**ï¼š2025å¹´12æœˆ10æ—¥  
**æ›´æ–°æ—¶é—´**ï¼š2025å¹´12æœˆ10æ—¥  
**çŠ¶æ€**ï¼šâœ… å·²å®ç°ï¼ˆæ–¹å¼Bï¼šç›´æ¥è°ƒç”¨å‡½æ•°ï¼‰

---

## ğŸ“‹ ç”¨æˆ·éœ€æ±‚

ç”¨æˆ·å¸Œæœ›ç‚¹å‡»"åˆ·æ–°å…¨å±€æ•°æ®"æŒ‰é’®åï¼Œç›´æ¥è¿è¡Œä»¥ä¸‹3ä¸ªè„šæœ¬ï¼š

1. `python3 fetch_news.py --yes` - æŠ“å–æ–°é—»
2. `python3 fetch_jobs.py --yes` - æŠ“å–æ‹›è˜ä¿¡æ¯
3. `python3 supplement_papers.py` - è¡¥å……è®ºæ–‡

---

## ğŸ” è„šæœ¬åŠŸèƒ½åˆ†æ

### 1. `fetch_news.py --yes` âœ…

**åŠŸèƒ½**ï¼šæŠ“å–æ–°é—»æ•°æ®
- ä»å¤šä¸ªæ–°é—»æºï¼ˆRSSã€Orz.aiã€NewsAPIç­‰ï¼‰æŠ“å–æ–°é—»
- åªä¿å­˜24å°æ—¶å†…çš„æ–°é—»
- `--yes` å‚æ•°ï¼šè‡ªåŠ¨ç¡®è®¤ï¼Œæ— éœ€äº¤äº’

**ç»“è®º**ï¼šâœ… **é€‚åˆç”¨äºåˆ·æ–°åŠŸèƒ½**

---

### 2. `fetch_jobs.py --yes` âœ…

**åŠŸèƒ½**ï¼šæŠ“å–æ‹›è˜ä¿¡æ¯
- ä»GitHub Jobsç­‰æŠ“å–æ‹›è˜ä¿¡æ¯
- è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
- `--yes` å‚æ•°ï¼šè‡ªåŠ¨ç¡®è®¤ï¼Œæ— éœ€äº¤äº’

**ç»“è®º**ï¼šâœ… **é€‚åˆç”¨äºåˆ·æ–°åŠŸèƒ½**

---

### 3. `supplement_papers.py` âš ï¸

**åŠŸèƒ½**ï¼šè¡¥å……è®ºæ–‡æ•°æ®ï¼ˆå°†å„æ ‡ç­¾è¡¥å……è‡³è‡³å°‘100ç¯‡ï¼‰

**é—®é¢˜åˆ†æ**ï¼š
- âŒ **ä¸æ˜¯æŠ“å–æ–°è®ºæ–‡**ï¼Œè€Œæ˜¯è¡¥å……è®ºæ–‡æ•°é‡
- âŒ åªæœ‰å½“æŸä¸ªæ ‡ç­¾çš„è®ºæ–‡æ•°**å°‘äº100ç¯‡**æ—¶æ‰ä¼šæŠ“å–
- âŒ å¦‚æœæ‰€æœ‰æ ‡ç­¾éƒ½å·²è¾¾åˆ°100ç¯‡ï¼Œä¸ä¼šæŠ“å–ä»»ä½•æ–°è®ºæ–‡
- âŒ ä¼šæŠ“å–å†å²è®ºæ–‡ï¼ˆä¸é™äºæœ€æ–°è®ºæ–‡ï¼‰

**ç»“è®º**ï¼šâš ï¸ **ä¸é€‚åˆç”¨äºæ—¥å¸¸åˆ·æ–°åŠŸèƒ½**

**æ¨èæ›¿ä»£æ–¹æ¡ˆ**ï¼š
- âœ… `fetch_new_data.py --papers` - æŠ“å–æ–°è®ºæ–‡ï¼ˆæ¨èï¼‰
- âœ… æˆ–ç»§ç»­ä½¿ç”¨å½“å‰çš„ `demo(**config)` æ–¹å¼

---

## ğŸ’¡ æ¨èæ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šä½¿ç”¨è„šæœ¬å‘½ä»¤ï¼ˆç”¨æˆ·éœ€æ±‚ï¼‰

**ä¼˜ç‚¹**ï¼š
- ç›´æ¥è°ƒç”¨è„šæœ¬ï¼Œé€»è¾‘æ¸…æ™°
- è„šæœ¬ç‹¬ç«‹ï¼Œæ˜“äºç»´æŠ¤

**ç¼ºç‚¹**ï¼š
- éœ€è¦å¯åŠ¨å­è¿›ç¨‹ï¼Œæ€§èƒ½ç•¥ä½
- é”™è¯¯å¤„ç†ç›¸å¯¹å¤æ‚

**å®ç°æ–¹å¼**ï¼š
```python
import subprocess

def refresh_papers():
    """åˆ·æ–°è®ºæ–‡æ•°æ® - ä½¿ç”¨è„šæœ¬å‘½ä»¤"""
    subprocess.run(['python3', 'fetch_new_data.py', '--papers'], check=True)

def refresh_news():
    """åˆ·æ–°æ–°é—»æ•°æ® - ä½¿ç”¨è„šæœ¬å‘½ä»¤"""
    subprocess.run(['python3', 'fetch_news.py', '--yes'], check=True)

def refresh_jobs():
    """åˆ·æ–°æ‹›è˜æ•°æ® - ä½¿ç”¨è„šæœ¬å‘½ä»¤"""
    subprocess.run(['python3', 'fetch_jobs.py', '--yes'], check=True)
```

---

### æ–¹æ¡ˆBï¼šç›´æ¥è°ƒç”¨å‡½æ•°ï¼ˆå½“å‰æ–¹å¼ï¼Œæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- æ€§èƒ½æ›´å¥½ï¼ˆæ— éœ€å¯åŠ¨å­è¿›ç¨‹ï¼‰
- é”™è¯¯å¤„ç†æ›´ç›´æ¥
- å¯ä»¥å…±äº«é…ç½®å’ŒçŠ¶æ€

**ç¼ºç‚¹**ï¼š
- éœ€è¦å¯¼å…¥æ¨¡å—

**å½“å‰å®ç°**ï¼š
```python
def refresh_papers():
    from daily_arxiv import load_config, demo
    config = load_config('config.yaml')
    demo(**config)

def refresh_news():
    from fetch_news import fetch_and_save_news
    fetch_and_save_news()

def refresh_jobs():
    from fetch_jobs import fetch_and_save_jobs
    fetch_and_save_jobs()
```

---

## ğŸ¯ å»ºè®®

### å¦‚æœç”¨æˆ·åšæŒä½¿ç”¨è„šæœ¬å‘½ä»¤

**æ¨èä½¿ç”¨**ï¼š
1. âœ… `python3 fetch_news.py --yes` - æŠ“å–æ–°é—»
2. âœ… `python3 fetch_jobs.py --yes` - æŠ“å–æ‹›è˜
3. âœ… `python3 fetch_new_data.py --papers` - **æŠ“å–æ–°è®ºæ–‡**ï¼ˆè€Œä¸æ˜¯supplement_papers.pyï¼‰

**åŸå› **ï¼š
- `fetch_new_data.py --papers` ä¼šæŠ“å–**æœ€æ–°çš„è®ºæ–‡**ï¼ˆæœ€è¿‘14å¤©ï¼‰
- `supplement_papers.py` åªæ˜¯è¡¥å……æ•°é‡ï¼Œå¯èƒ½æŠ“å–å†å²è®ºæ–‡

---

## âœ… æœ€ç»ˆç¡®è®¤ä¸å®ç°

**ç”¨æˆ·çš„é—®é¢˜**ï¼šè¿è¡Œè¿™3ä¸ªè„šæœ¬æ˜¯å¦æ„å‘³ç€ä¼šæŠ“å–è®ºæ–‡ã€æ–°é—»ã€å²—ä½æœºä¼š3ä¸ªæ¨¡å—çš„æ–°æ•°æ®ï¼Ÿ

**å›ç­”**ï¼š
- âœ… **æ–°é—»**ï¼š`fetch_news.py --yes` ä¼šæŠ“å–**æ–°æ–°é—»**ï¼ˆ24å°æ—¶å†…ï¼‰
- âœ… **æ‹›è˜**ï¼š`fetch_jobs.py --yes` ä¼šæŠ“å–**æ–°æ‹›è˜ä¿¡æ¯**
- âš ï¸ **è®ºæ–‡**ï¼š`supplement_papers.py` **ä¸ä¼šæŠ“å–æ–°è®ºæ–‡**ï¼Œåªæ˜¯è¡¥å……æ•°é‡

**å®ç°æ–¹æ¡ˆ**ï¼š
- âœ… å·²é‡‡ç”¨**æ–¹å¼Bï¼ˆç›´æ¥è°ƒç”¨å‡½æ•°ï¼‰**
- âœ… **è®ºæ–‡**ï¼šä½¿ç”¨ `fetch_new_data.fetch_papers()` - æŠ“å–**æ–°è®ºæ–‡**ï¼ˆæœ€è¿‘14å¤©ï¼‰
- âœ… **æ–°é—»**ï¼šä½¿ç”¨ `fetch_news.fetch_and_save_news()` - æŠ“å–**æ–°æ–°é—»**ï¼ˆ24å°æ—¶å†…ï¼‰
- âœ… **æ‹›è˜**ï¼šä½¿ç”¨ `fetch_jobs.fetch_and_save_jobs()` - æŠ“å–**æ–°æ‹›è˜ä¿¡æ¯**

**æµ‹è¯•ç»“æœ**ï¼š
- âœ… æ‰€æœ‰æ¨¡å—å¯¼å…¥æµ‹è¯•é€šè¿‡
- âœ… APIè·¯ç”±æµ‹è¯•é€šè¿‡
- âœ… å®é™…åˆ·æ–°åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼ˆè®ºæ–‡ã€æ‹›è˜ã€æ–°é—»å‡æˆåŠŸï¼‰

---

## ğŸ”§ å®ç°ä»£ç 

å¦‚æœç”¨æˆ·ç¡®è®¤ä½¿ç”¨è„šæœ¬å‘½ä»¤æ–¹å¼ï¼Œå¯ä»¥è¿™æ ·å®ç°ï¼š

```python
import subprocess
import threading

def refresh_papers():
    """åˆ·æ–°è®ºæ–‡æ•°æ® - ä½¿ç”¨è„šæœ¬å‘½ä»¤"""
    global refresh_status
    try:
        with refresh_status_lock:
            refresh_status['papers'] = {'status': 'running', 'message': 'æ­£åœ¨åˆ·æ–°è®ºæ–‡...'}
        logger.info("å¼€å§‹åˆ·æ–°è®ºæ–‡æ•°æ®...")
        
        # è¿è¡Œè„šæœ¬å‘½ä»¤
        result = subprocess.run(
            ['python3', 'fetch_new_data.py', '--papers'],
            capture_output=True,
            text=True,
            timeout=600  # 10åˆ†é’Ÿè¶…æ—¶
        )
        
        if result.returncode == 0:
            with refresh_status_lock:
                refresh_status['papers'] = {'status': 'success', 'message': 'è®ºæ–‡åˆ·æ–°å®Œæˆ'}
            logger.info("è®ºæ–‡æ•°æ®åˆ·æ–°å®Œæˆ")
        else:
            raise Exception(f"è„šæœ¬æ‰§è¡Œå¤±è´¥: {result.stderr}")
    except Exception as e:
        with refresh_status_lock:
            refresh_status['papers'] = {'status': 'error', 'message': f'åˆ·æ–°å¤±è´¥: {str(e)}'}
        logger.error(f"è®ºæ–‡æ•°æ®åˆ·æ–°å¤±è´¥: {e}")

def refresh_news():
    """åˆ·æ–°æ–°é—»æ•°æ® - ä½¿ç”¨è„šæœ¬å‘½ä»¤"""
    global refresh_status
    try:
        with refresh_status_lock:
            refresh_status['news'] = {'status': 'running', 'message': 'æ­£åœ¨åˆ·æ–°æ–°é—»...'}
        logger.info("å¼€å§‹åˆ·æ–°æ–°é—»æ•°æ®...")
        
        result = subprocess.run(
            ['python3', 'fetch_news.py', '--yes'],
            capture_output=True,
            text=True,
            timeout=300  # 5åˆ†é’Ÿè¶…æ—¶
        )
        
        if result.returncode == 0:
            with refresh_status_lock:
                refresh_status['news'] = {'status': 'success', 'message': 'æ–°é—»åˆ·æ–°å®Œæˆ'}
            logger.info("æ–°é—»æ•°æ®åˆ·æ–°å®Œæˆ")
        else:
            raise Exception(f"è„šæœ¬æ‰§è¡Œå¤±è´¥: {result.stderr}")
    except Exception as e:
        with refresh_status_lock:
            refresh_status['news'] = {'status': 'error', 'message': f'åˆ·æ–°å¤±è´¥: {str(e)}'}
        logger.error(f"æ–°é—»æ•°æ®åˆ·æ–°å¤±è´¥: {e}")

def refresh_jobs():
    """åˆ·æ–°æ‹›è˜æ•°æ® - ä½¿ç”¨è„šæœ¬å‘½ä»¤"""
    global refresh_status
    try:
        with refresh_status_lock:
            refresh_status['jobs'] = {'status': 'running', 'message': 'æ­£åœ¨åˆ·æ–°æ‹›è˜ä¿¡æ¯...'}
        logger.info("å¼€å§‹åˆ·æ–°æ‹›è˜æ•°æ®...")
        
        result = subprocess.run(
            ['python3', 'fetch_jobs.py', '--yes'],
            capture_output=True,
            text=True,
            timeout=300  # 5åˆ†é’Ÿè¶…æ—¶
        )
        
        if result.returncode == 0:
            with refresh_status_lock:
                refresh_status['jobs'] = {'status': 'success', 'message': 'æ‹›è˜ä¿¡æ¯åˆ·æ–°å®Œæˆ'}
            logger.info("æ‹›è˜æ•°æ®åˆ·æ–°å®Œæˆ")
        else:
            raise Exception(f"è„šæœ¬æ‰§è¡Œå¤±è´¥: {result.stderr}")
    except Exception as e:
        with refresh_status_lock:
            refresh_status['jobs'] = {'status': 'error', 'message': f'åˆ·æ–°å¤±è´¥: {str(e)}'}
        logger.error(f"æ‹›è˜æ•°æ®åˆ·æ–°å¤±è´¥: {e}")
```

---

**æœ€åæ›´æ–°**ï¼š2025å¹´12æœˆ10æ—¥  
**ç»´æŠ¤è€…**ï¼šAIå¼€å‘åŠ©æ‰‹





