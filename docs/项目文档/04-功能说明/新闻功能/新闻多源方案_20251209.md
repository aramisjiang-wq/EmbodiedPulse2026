# 新闻多源方案说明

**创建日期**: 2025-12-09  
**最后更新**: 2025-12-09

---

## 📋 方案概述

由于网络环境对某些API的访问存在限制，我们实现了**三级备选策略**，确保能够稳定获取具身智能相关新闻。

---

## 🔄 三级备选策略

### 第一优先级：RSS源（推荐）

**优点**：
- ✅ 完全免费
- ✅ 无需API key
- ✅ 稳定可靠
- ✅ 多源聚合

**RSS源列表**：
1. **机器之心** - 已验证可用 ✅
2. **ArXiv Robotics RSS** - 学术论文
3. **36氪科技** - 科技媒体
4. **虎嗅科技** - 科技媒体
5. **TechCrunch Robotics** - 国外科技媒体
6. **IEEE Spectrum Robotics** - 专业科技媒体

**实现文件**：`rss_news_client.py`

---

### 第二优先级：NewsAPI.org

**优点**：
- ✅ 稳定可靠
- ✅ 数据源丰富（70,000+新闻源）
- ✅ 支持中英文搜索
- ✅ 免费版：500次/天

**配置**：
- API Key: `359745328c4a471eb7641e120a4c330f`（已配置）
- 环境变量: `NEWSAPI_API_KEY`

**实现文件**：`newsapi_client.py`

---

### 第三优先级：Orz.ai API

**优点**：
- ✅ 完全免费
- ✅ 多平台支持
- ✅ 实时更新

**缺点**：
- ❌ 当前网络环境访问困难（SSL问题）

**实现文件**：`news_client.py`

---

## 🔧 智能切换逻辑

```python
# 优先级顺序
1. RSS源 → 如果获取到数据，使用RSS
2. NewsAPI.org → 如果RSS数据不足，补充NewsAPI数据
3. Orz.ai API → 如果前两者都失败，尝试Orz.ai
```

**去重机制**：
- 基于新闻链接自动去重
- 多源数据智能合并
- 确保数据不重复

---

## 📊 当前状态

### 测试结果

- ✅ **RSS源**：成功获取2条新闻（机器之心）
- ⚠️ **NewsAPI.org**：当前网络环境SSL问题（服务器上应正常）
- ⚠️ **Orz.ai API**：当前网络环境SSL问题（服务器上应正常）

### 数据库状态

- 总记录数：2条
- 来源：RSS（机器之心）
- 状态：正常

---

## 🚀 使用方式

### 手动执行

```bash
# 使用多源方案抓取新闻
python3 fetch_news.py --yes
```

### 自动执行

定时任务已配置，每天UTC 4:00和16:00自动执行。

---

## 📝 实施细节

### 文件结构

```
rss_news_client.py      # RSS新闻客户端
newsapi_client.py       # NewsAPI.org客户端
news_client.py          # Orz.ai API客户端（原）
fetch_news.py           # 协调抓取脚本（智能切换）
save_news_to_db.py      # 保存到数据库
news_models.py          # 数据库模型
```

### 依赖

```txt
feedparser              # RSS解析
requests                # HTTP请求
beautifulsoup4          # HTML解析（备用）
```

---

## 🎯 优势

1. **多源保障**：三个备选方案，提高成功率
2. **自动切换**：智能选择可用源
3. **自动去重**：多源数据合并，避免重复
4. **稳定可靠**：RSS源免费且稳定
5. **数据丰富**：NewsAPI.org提供70,000+新闻源

---

## ⚠️ 注意事项

1. **网络环境**：当前测试环境存在SSL问题，但服务器上应正常
2. **API限制**：NewsAPI.org免费版500次/天，需合理使用
3. **RSS源稳定性**：部分RSS源可能不稳定，已按稳定性排序
4. **关键词过滤**：自动过滤具身智能相关新闻，可能过滤掉部分相关新闻

---

## 🔮 未来优化

1. **增加RSS源**：添加更多稳定的RSS源
2. **缓存机制**：缓存RSS数据，减少请求
3. **错误重试**：优化重试机制
4. **监控告警**：监控各源的成功率
5. **数据质量**：优化关键词过滤，提高相关性

---

**最后更新**: 2025-12-09


