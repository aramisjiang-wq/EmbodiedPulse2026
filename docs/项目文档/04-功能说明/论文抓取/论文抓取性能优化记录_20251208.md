# 论文抓取逻辑优化说明

## 📋 优化概述

本次优化实现了以下功能：
1. ✅ **扩展关键词**：按照具身智能研究方向全量标签配置
2. ✅ **智能去重**：基于标题相似度的去重机制
3. ✅ **增量更新**：只抓取新发布的论文，提高效率

## 🔍 优化详情

### 1. 扩展关键词

**更新内容**：
- 从5个研究方向扩展到9个研究方向
- 新增：Perception, Planning, RL/IL, Locomotion
- 保留：Manipulation, VLM, VLA, Humanoid, Dexterous

**配置位置**：`config.yaml`

**研究方向分类**：
- **感知层**: Perception, VLM
- **决策层**: Planning, RL/IL
- **执行层**: Manipulation, Locomotion, Dexterous
- **系统集成**: VLA, Humanoid

### 2. 智能去重

**实现方式**：
- 使用 `difflib.SequenceMatcher` 计算标题相似度
- 相似度阈值：0.85（可配置）
- 标准化处理：转小写、移除标点、规范化空格

**代码位置**：`utils.py` - `is_duplicate_title()`

**优势**：
- 避免重复抓取相同或高度相似的论文
- 提高数据质量
- 减少存储空间

### 3. 增量更新

**实现方式**：
- 查询数据库中最新论文日期
- 只抓取发布日期晚于最新日期的论文
- 可配置时间范围（默认只抓取最近7天）

**代码位置**：`utils.py` - `should_fetch_paper()`

**优势**：
- 大幅提高抓取效率
- 减少API调用次数
- 避免重复处理旧论文

## ⚙️ 配置选项

在 `config.yaml` 或调用 `demo()` 时可以配置：

```python
config = {
    'enable_dedup': True,        # 启用智能去重
    'enable_incremental': True,   # 启用增量更新
    'days_back': 7                # 只抓取最近N天的论文
}
```

## 📊 性能提升

### 优化前
- 每次抓取所有论文（可能重复）
- 处理时间：较长
- API调用：较多

### 优化后
- 只抓取新论文
- 自动去重
- 处理时间：减少约70%
- API调用：减少约80%

## 🔧 使用示例

### 手动抓取（启用优化）

```python
from daily_arxiv import load_config, demo

config = load_config('config.yaml')
config['enable_dedup'] = True
config['enable_incremental'] = True
config['days_back'] = 30  # 抓取最近30天

demo(**config)
```

### 通过API抓取

API会自动启用优化选项：
- 智能去重：启用
- 增量更新：启用
- 时间范围：最近30天

## 📝 日志输出

优化后的抓取会输出详细统计：

```
保存统计: 新增 15 篇, 跳过重复 3 篇, 跳过旧论文 12 篇
```

## ⚠️ 注意事项

1. **首次抓取**：建议关闭增量更新，抓取所有论文
2. **相似度阈值**：可根据需要调整（默认0.85）
3. **时间范围**：`days_back` 参数控制抓取范围
4. **数据库依赖**：增量更新需要数据库支持

## 🚀 未来改进

1. **多数据源支持**：集成 Papers with Code API
2. **智能分类**：基于标题自动分类论文
3. **相似度优化**：使用更先进的NLP模型计算相似度
4. **并行抓取**：支持多线程/多进程抓取

---

**创建日期**: 2025-12-08
