# æœåŠ¡å™¨æ“ä½œå®Œæ•´æŒ‡å—

**ç‰ˆæœ¬**: v2.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-12-19  
**æœ€åæ›´æ–°**: 2025-12-19

---

## ğŸ“‹ ç›®å½•

1. [ä»£ç æ›´æ–°æµç¨‹](#ä»£ç æ›´æ–°æµç¨‹)
2. [æœåŠ¡ç®¡ç†](#æœåŠ¡ç®¡ç†)
3. [æ•°æ®æ£€æŸ¥](#æ•°æ®æ£€æŸ¥)
4. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
5. [å¸¸ç”¨å‘½ä»¤](#å¸¸ç”¨å‘½ä»¤)

---

## ğŸ”„ ä»£ç æ›´æ–°æµç¨‹

### æ ‡å‡†æµç¨‹ï¼ˆå¿…é¡»éµå®ˆï¼‰

```
æœ¬åœ°ä¿®å¤ â†’ æäº¤GitHub â†’ æœåŠ¡å™¨æ‹‰å– â†’ éªŒè¯ â†’ é‡å¯ â†’ æµ‹è¯•
```

### è¯¦ç»†æ­¥éª¤

#### 1. æœ¬åœ°æ“ä½œï¼ˆå¼€å‘è€…ï¼‰

```bash
# 1. ä¿®å¤ä»£ç 
# ... ç¼–è¾‘ä»£ç  ...

# 2. æµ‹è¯•ä¿®å¤
python3 -m py_compile <æ–‡ä»¶å>
python3 test_<åŠŸèƒ½>.py

# 3. æäº¤åˆ°GitHub
git add .
git commit -m "ä¿®å¤æè¿°"
git push origin main
```

#### 2. æœåŠ¡å™¨æ“ä½œï¼ˆè¿ç»´ï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /srv/EmbodiedPulse2026

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 3. æ£€æŸ¥ä»£ç æ›´æ–°
git log --oneline -5

# 4. éªŒè¯ä»£ç è¯­æ³•
python3 -m py_compile app.py
python3 -m py_compile auth_routes.py

# 5. é‡å¯æœåŠ¡
systemctl restart embodiedpulse

# 6. æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status embodiedpulse

# 7. æŸ¥çœ‹æ—¥å¿—
journalctl -u embodiedpulse -n 50 --no-pager
```

### ä¸€é”®æ›´æ–°è„šæœ¬

```bash
cd /srv/EmbodiedPulse2026
bash scripts/server_fix_standard_flow.sh
```

---

## ğŸ› ï¸ æœåŠ¡ç®¡ç†

### æœåŠ¡çŠ¶æ€æ£€æŸ¥

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status embodiedpulse

# æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
systemctl is-active embodiedpulse

# æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯ç”¨ï¼ˆå¼€æœºè‡ªå¯ï¼‰
systemctl is-enabled embodiedpulse
```

### æœåŠ¡å¯åœ

```bash
# å¯åŠ¨æœåŠ¡
systemctl start embodiedpulse

# åœæ­¢æœåŠ¡
systemctl stop embodiedpulse

# é‡å¯æœåŠ¡
systemctl restart embodiedpulse

# é‡è½½é…ç½®ï¼ˆä¸ä¸­æ–­æœåŠ¡ï¼‰
systemctl reload embodiedpulse
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹æœ€è¿‘50æ¡æ—¥å¿—
journalctl -u embodiedpulse -n 50 --no-pager

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
journalctl -u embodiedpulse -f

# æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
journalctl -u embodiedpulse --since today

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
journalctl -u embodiedpulse -n 200 | grep -i "error\|å¤±è´¥\|fail"
```

---

## ğŸ” æ•°æ®æ£€æŸ¥

### æ•°æ®åº“è¿æ¥æ£€æŸ¥

```bash
cd /srv/EmbodiedPulse2026
python3 << EOF
from database import get_session
try:
    session = get_session()
    session.execute("SELECT 1")
    print("âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸")
    session.close()
except Exception as e:
    print(f"âŒ æ•°æ®åº“è¿æ¥å¤±è´¥: {e}")
EOF
```

### Bç«™æ•°æ®æ£€æŸ¥

```bash
# æ£€æŸ¥Bç«™æ•°æ®å®Œæ•´æ€§
bash scripts/check_bilibili_data_integrity.sh

# æ£€æŸ¥æ’­æ”¾é‡æ•°æ®
bash scripts/check_bilibili_play_counts.sh

# æ£€æŸ¥æ•°æ®åº“é…ç½®
bash scripts/check_bilibili_database_config.sh

# æ£€æŸ¥è‡ªåŠ¨æ›´æ–°é…ç½®
bash scripts/check_bilibili_auto_update.sh
```

### è®ºæ–‡æ•°æ®æ£€æŸ¥

```bash
# æ£€æŸ¥è®ºæ–‡æ•°æ®
python3 scripts/data_health_check.py
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### 502 Bad Gateway

**å¯èƒ½åŸå› **:
1. æœåŠ¡æœªå¯åŠ¨
2. Pythonè¯­æ³•é”™è¯¯
3. æ•°æ®åº“è¿æ¥å¤±è´¥
4. ç«¯å£è¢«å ç”¨

**æ’æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status embodiedpulse

# 2. æ£€æŸ¥Pythonè¯­æ³•
python3 -m py_compile app.py

# 3. æ£€æŸ¥æ•°æ®åº“è¿æ¥
python3 -c "from database import get_session; get_session()"

# 4. æ£€æŸ¥ç«¯å£
netstat -tlnp | grep 8000

# 5. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
journalctl -u embodiedpulse -n 100 | grep -i error
```

### æ•°æ®æœªæ›´æ–°

**æ’æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥å®šæ—¶ä»»åŠ¡é…ç½®
bash scripts/check_bilibili_auto_update.sh

# 2. æ£€æŸ¥å®šæ—¶ä»»åŠ¡æ—¥å¿—
journalctl -u embodiedpulse | grep -i "å®šæ—¶\|scheduler"

# 3. æ‰‹åŠ¨è§¦å‘æ›´æ–°
python3 fetch_bilibili_data.py --video-count 10
```

### å‰ç«¯æ˜¾ç¤ºé”™è¯¯

**æ’æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥APIè¿”å›
curl "https://essay.gradmotion.com/api/bilibili/all?force=1"

# 2. æ£€æŸ¥æœåŠ¡æ—¥å¿—
journalctl -u embodiedpulse -n 50 | grep -i "api\|error"

# 3. æ¸…é™¤ç¼“å­˜
# å‰ç«¯ç‚¹å‡»"åˆ·æ–°æ•°æ®"æŒ‰é’®ï¼ˆforce=1ï¼‰
```

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### Gitæ“ä½œ

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# æŸ¥çœ‹æäº¤å†å²
git log --oneline -10

# æŸ¥çœ‹æ–‡ä»¶å˜æ›´
git diff HEAD

# æŸ¥çœ‹å½“å‰çŠ¶æ€
git status
```

### Pythonç¯å¢ƒ

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# æ£€æŸ¥Pythonç‰ˆæœ¬
python3 --version

# æ£€æŸ¥ä¾èµ–
pip list | grep -i "flask\|gunicorn\|sqlalchemy"
```

### ç³»ç»Ÿèµ„æº

```bash
# æŸ¥çœ‹CPUå’Œå†…å­˜
top

# æŸ¥çœ‹ç£ç›˜ç©ºé—´
df -h

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep python
```

### ç½‘ç»œæ£€æŸ¥

```bash
# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep 8000

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status

# æµ‹è¯•API
curl http://localhost:8000/api/health
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä»£ç æ›´æ–°å‰

- âœ… æœ¬åœ°æµ‹è¯•é€šè¿‡
- âœ… ä»£ç å·²æäº¤åˆ°GitHub
- âœ… å¤‡ä»½æ•°æ®åº“ï¼ˆé‡è¦æ“ä½œï¼‰

### 2. ä»£ç æ›´æ–°å

- âœ… éªŒè¯ä»£ç è¯­æ³•
- âœ… æ£€æŸ¥æœåŠ¡çŠ¶æ€
- âœ… æŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ— é”™è¯¯
- âœ… æµ‹è¯•å…³é”®åŠŸèƒ½

### 3. å®šæœŸç»´æŠ¤

- âœ… æ¯å‘¨æ£€æŸ¥æœåŠ¡çŠ¶æ€
- âœ… æ¯æœˆæ£€æŸ¥æ—¥å¿—
- âœ… å®šæœŸå¤‡ä»½æ•°æ®åº“
- âœ… æ›´æ–°ä¾èµ–åŒ…

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Bç«™æ•°æ®é—®é¢˜å®Œæ•´è§£å†³æ–¹æ¡ˆ](../09-é—®é¢˜ä¿®å¤/Bç«™æ•°æ®é—®é¢˜å®Œæ•´è§£å†³æ–¹æ¡ˆ.md)
- [éƒ¨ç½²æ•™ç¨‹](./éƒ¨ç½²æ•™ç¨‹/)
- [é…ç½®æŒ‡å—](./é…ç½®æŒ‡å—/)

---

**æœ€åæ›´æ–°**: 2025-12-19

