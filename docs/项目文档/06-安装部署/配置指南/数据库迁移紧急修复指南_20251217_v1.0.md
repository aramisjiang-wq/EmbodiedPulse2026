# æ•°æ®åº“è¿ç§»ç´§æ€¥ä¿®å¤æŒ‡å—

**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2025-12-17  
**é—®é¢˜**: æœåŠ¡å™¨æ•°æ®åº“æ–‡ä»¶å­˜åœ¨ä½†æ•°æ®ä¸ºç©ºï¼ˆè®°å½•æ•°ä¸º0ï¼‰

---

## ğŸ“‹ é—®é¢˜è¯Šæ–­

### å½“å‰çŠ¶æ€

**æœåŠ¡å™¨æ•°æ®åº“çŠ¶æ€**:
- âš ï¸ è®ºæ–‡æ•°æ®åº“æ–‡ä»¶ä½ç½®é”™è¯¯: `/srv/EmbodiedPulse2026/instance/papers.db` (68Kï¼Œåªæœ‰è®¤è¯è¡¨)
- âœ… Bç«™æ•°æ®åº“æ–‡ä»¶å­˜åœ¨: `/srv/EmbodiedPulse2026/bilibili.db` (432K)
- âŒ è®ºæ–‡æ•°é‡: 0
- âŒ UPä¸»æ•°é‡: 0
- âŒ è§†é¢‘æ•°é‡: 0

**æœ¬åœ°æ•°æ®åº“çŠ¶æ€**:
- âœ… **è®ºæ–‡æ•°æ®åº“**: `/papers.db` (20MBï¼Œ**14873ç¯‡è®ºæ–‡**) âš ï¸ **è¿™æ˜¯æ­£ç¡®çš„æ•°æ®åº“æ–‡ä»¶**
- âœ… Bç«™æ•°æ®åº“: `bilibili.db` (432Kï¼Œ12ä¸ªUPä¸»ï¼Œ516ä¸ªè§†é¢‘)
- âš ï¸ `instance/papers.db` åªæœ‰è®¤è¯è¡¨ï¼Œä¸æ˜¯è®ºæ–‡æ•°æ®

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä»æœ¬åœ°å¤åˆ¶Bç«™æ•°æ®åº“ï¼ˆæ¨èï¼‰

**Bç«™æ•°æ®åº“æœ‰æ•°æ®ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶**

#### æ­¥éª¤1ï¼šåœ¨æœ¬åœ°å¤‡ä»½æ•°æ®åº“

```bash
cd "/Users/dong/Documents/Cursor/Embodied Pulse"

# å¤‡ä»½Bç«™æ•°æ®åº“
cp bilibili.db backups/bilibili_backup_$(date +%Y%m%d_%H%M%S).db

# éªŒè¯å¤‡ä»½
ls -lh backups/bilibili_backup_*.db
```

#### æ­¥éª¤2ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨

**æ–¹æ³•1ï¼šä½¿ç”¨ scpï¼ˆæ¨èï¼‰**

```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
cd "/Users/dong/Documents/Cursor/Embodied Pulse"

# ä¸Šä¼ è®ºæ–‡æ•°æ®åº“ï¼ˆé‡è¦ï¼šæ˜¯æ ¹ç›®å½•çš„papers.dbï¼Œä¸æ˜¯instance/papers.dbï¼‰
scp papers.db root@101.200.222.139:/srv/EmbodiedPulse2026/

# ä¸Šä¼ Bç«™æ•°æ®åº“
scp bilibili.db root@101.200.222.139:/srv/EmbodiedPulse2026/

# è¾“å…¥å¯†ç : XLj4kUnh
```

**æ–¹æ³•2ï¼šä½¿ç”¨è¿ç§»è„šæœ¬**

```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
cd "/Users/dong/Documents/Cursor/Embodied Pulse"
bash scripts/migrate_database_to_server.sh
```

#### æ­¥éª¤3ï¼šåœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®æƒé™

```bash
# SSHç™»å½•æœåŠ¡å™¨
ssh root@101.200.222.139

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /srv/EmbodiedPulse2026

# è®¾ç½®æ–‡ä»¶æƒé™
chmod 644 papers.db
chmod 644 bilibili.db
chown root:root papers.db
chown root:root bilibili.db

# éªŒè¯æ•°æ®
sqlite3 papers.db "SELECT COUNT(*) FROM papers;"
# åº”è¯¥æ˜¾ç¤º: 14873 (è®ºæ–‡æ•°é‡)

sqlite3 bilibili.db "SELECT COUNT(*) FROM bilibili_ups;"
# åº”è¯¥æ˜¾ç¤º: 12 (UPä¸»æ•°é‡)

sqlite3 bilibili.db "SELECT COUNT(*) FROM bilibili_videos;"
# åº”è¯¥æ˜¾ç¤º: 516 (è§†é¢‘æ•°é‡)
```

#### æ­¥éª¤4ï¼šé‡å¯æœåŠ¡

```bash
# é‡å¯æœåŠ¡ä½¿æ•°æ®åº“ç”Ÿæ•ˆ
systemctl restart embodiedpulse

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status embodiedpulse
```

---

### æ–¹æ¡ˆ2ï¼šè®ºæ–‡æ•°æ®åº“å¤„ç†

**è®ºæ–‡æ•°æ®åº“å½“å‰åªæœ‰è®¤è¯è¡¨ï¼Œæ²¡æœ‰papersè¡¨**

#### é€‰é¡¹Aï¼šè®©ç³»ç»Ÿè‡ªåŠ¨æŠ“å–ï¼ˆæ¨èï¼‰

è®ºæ–‡æ•°æ®å¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡è‡ªåŠ¨æŠ“å–ï¼Œæ— éœ€æ‰‹åŠ¨è¿ç§»ã€‚

**æ£€æŸ¥å®šæ—¶ä»»åŠ¡**:
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /srv/EmbodiedPulse2026

# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env | grep AUTO_FETCH_ENABLED

# åº”è¯¥æ˜¾ç¤º: AUTO_FETCH_ENABLED=true

# æ£€æŸ¥å®šæ—¶ä»»åŠ¡æ˜¯å¦è¿è¡Œ
journalctl -u embodiedpulse | grep -i "å®šæ—¶ä»»åŠ¡\|scheduler"

# åº”è¯¥çœ‹åˆ°: "å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨å·²å¯åŠ¨"
```

**æ‰‹åŠ¨è§¦å‘æŠ“å–**:
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /srv/EmbodiedPulse2026
source venv/bin/activate

# æ‰‹åŠ¨è§¦å‘è®ºæ–‡æŠ“å–
python3 -c "from fetch_new_data import fetch_papers; fetch_papers()"
```

#### é€‰é¡¹Bï¼šä»JSONæ–‡ä»¶è¿ç§»ï¼ˆå¦‚æœæœ‰å†å²æ•°æ®ï¼‰

å¦‚æœæœ¬åœ°æœ‰JSONæ ¼å¼çš„è®ºæ–‡æ•°æ®ï¼Œå¯ä»¥è¿ç§»ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /srv/EmbodiedPulse2026
source venv/bin/activate

# è¿è¡Œè¿ç§»è„šæœ¬ï¼ˆå¦‚æœæœ‰ï¼‰
python3 migrate_json_to_db.py
```

---

## ğŸ“ å®Œæ•´è¿ç§»æ­¥éª¤ï¼ˆä¸€é”®æ‰§è¡Œï¼‰

### åœ¨æœ¬åœ°æ‰§è¡Œ

```bash
cd "/Users/dong/Documents/Cursor/Embodied Pulse"

# 1. å¤‡ä»½æ•°æ®åº“
mkdir -p backups
cp papers.db backups/papers_backup_$(date +%Y%m%d_%H%M%S).db
cp bilibili.db backups/bilibili_backup_$(date +%Y%m%d_%H%M%S).db

# 2. ä¸Šä¼ è®ºæ–‡æ•°æ®åº“åˆ°æœåŠ¡å™¨ï¼ˆé‡è¦ï¼šæ˜¯æ ¹ç›®å½•çš„papers.dbï¼‰
scp papers.db root@101.200.222.139:/srv/EmbodiedPulse2026/

# 3. ä¸Šä¼ Bç«™æ•°æ®åº“åˆ°æœåŠ¡å™¨
scp bilibili.db root@101.200.222.139:/srv/EmbodiedPulse2026/

# è¾“å…¥å¯†ç : XLj4kUnh
```

### åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ

```bash
# SSHç™»å½•æœåŠ¡å™¨
ssh root@101.200.222.139

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /srv/EmbodiedPulse2026

# è®¾ç½®æ–‡ä»¶æƒé™
chmod 644 papers.db
chmod 644 bilibili.db
chown root:root papers.db
chown root:root bilibili.db

# éªŒè¯æ•°æ®
sqlite3 papers.db "SELECT COUNT(*) FROM papers;"
# åº”è¯¥æ˜¾ç¤º: 14873

sqlite3 bilibili.db "SELECT COUNT(*) FROM bilibili_ups;"
# åº”è¯¥æ˜¾ç¤º: 12

sqlite3 bilibili.db "SELECT COUNT(*) FROM bilibili_videos;"
# åº”è¯¥æ˜¾ç¤º: 516

# é‡å¯æœåŠ¡
systemctl restart embodiedpulse

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status embodiedpulse

# éªŒè¯ç½‘ç«™æ•°æ®
# è®¿é—® https://blibli.gradmotion.com æ£€æŸ¥æ•°æ®æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
```

---

## âœ… éªŒè¯æ­¥éª¤

### 1. éªŒè¯Bç«™æ•°æ®åº“

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /srv/EmbodiedPulse2026

# æ£€æŸ¥UPä¸»æ•°é‡
sqlite3 bilibili.db "SELECT COUNT(*) FROM bilibili_ups;"
# åº”è¯¥æ˜¾ç¤º: 12

# æ£€æŸ¥è§†é¢‘æ•°é‡
sqlite3 bilibili.db "SELECT COUNT(*) FROM bilibili_videos;"
# åº”è¯¥æ˜¾ç¤º: 516

# æŸ¥çœ‹å‰3ä¸ªUPä¸»
sqlite3 bilibili.db "SELECT name, fans_formatted FROM bilibili_ups LIMIT 3;"
```

### 2. éªŒè¯è®ºæ–‡æ•°æ®åº“

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /srv/EmbodiedPulse2026

# æ£€æŸ¥æ˜¯å¦æœ‰papersè¡¨
sqlite3 instance/papers.db ".tables"

# å¦‚æœæœ‰papersè¡¨ï¼Œæ£€æŸ¥æ•°é‡
sqlite3 instance/papers.db "SELECT COUNT(*) FROM papers;" 2>/dev/null || echo "papersè¡¨ä¸å­˜åœ¨"

# å¦‚æœæ²¡æœ‰papersè¡¨ï¼Œç­‰å¾…å®šæ—¶ä»»åŠ¡æŠ“å–æˆ–æ‰‹åŠ¨è§¦å‘
```

### 3. éªŒè¯ç½‘ç«™æ˜¾ç¤º

1. **è®¿é—®Bç«™é¡µé¢**: https://blibli.gradmotion.com
   - åº”è¯¥èƒ½çœ‹åˆ°UPä¸»åˆ—è¡¨
   - åº”è¯¥èƒ½çœ‹åˆ°è§†é¢‘æ•°æ®

2. **è®¿é—®è®ºæ–‡é¡µé¢**: https://essay.gradmotion.com
   - å¦‚æœpapersè¡¨ä¸å­˜åœ¨ï¼Œé¡µé¢å¯èƒ½æ˜¾ç¤º"æš‚æ— æ•°æ®"
   - ç­‰å¾…å®šæ—¶ä»»åŠ¡æŠ“å–æˆ–æ‰‹åŠ¨è§¦å‘æŠ“å–

---

## ğŸš¨ å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šä¸Šä¼ åæ•°æ®ä»ç„¶æ˜¯0

**å¯èƒ½åŸå› **:
- æ–‡ä»¶æƒé™é”™è¯¯
- æœåŠ¡æœªé‡å¯
- æ•°æ®åº“æ–‡ä»¶æŸå

**è§£å†³æ–¹æ³•**:
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -l /srv/EmbodiedPulse2026/bilibili.db
# åº”è¯¥æ˜¯: -rw-r--r-- 1 root root

# æ£€æŸ¥æ–‡ä»¶å¤§å°
ls -lh /srv/EmbodiedPulse2026/bilibili.db
# åº”è¯¥å¤§äº 400K

# é‡å¯æœåŠ¡
systemctl restart embodiedpulse

# éªŒè¯æ•°æ®
sqlite3 /srv/EmbodiedPulse2026/bilibili.db "SELECT COUNT(*) FROM bilibili_ups;"
```

### é—®é¢˜2ï¼šè®ºæ–‡æ•°æ®åº“æ²¡æœ‰papersè¡¨

**è¿™æ˜¯æ­£å¸¸çš„**ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰æŠ“å–è¿‡è®ºæ–‡æ•°æ®ã€‚

**è§£å†³æ–¹æ³•**:
1. ç­‰å¾…å®šæ—¶ä»»åŠ¡è‡ªåŠ¨æŠ“å–ï¼ˆæ¯å°æ—¶ï¼‰
2. æˆ–æ‰‹åŠ¨è§¦å‘æŠ“å–ï¼ˆè§ä¸Šæ–¹"æ–¹æ¡ˆ2"ï¼‰

### é—®é¢˜3ï¼šè¡¨åä¸åŒ¹é…

**Bç«™æ•°æ®åº“è¡¨å**:
- `bilibili_ups`ï¼ˆå¤æ•°ï¼Œä¸æ˜¯ `bilibili_up`ï¼‰
- `bilibili_videos`ï¼ˆå¤æ•°ï¼Œä¸æ˜¯ `bilibili_video`ï¼‰

**æ£€æŸ¥è„šæœ¬å·²æ›´æ–°**ï¼Œä½¿ç”¨æ­£ç¡®çš„è¡¨åã€‚

---

## ğŸ“Š è¿ç§»åé¢„æœŸç»“æœ

### Bç«™æ•°æ®åº“
- âœ… UPä¸»æ•°é‡: 12
- âœ… è§†é¢‘æ•°é‡: 516
- âœ… ç½‘ç«™æ­£å¸¸æ˜¾ç¤ºæ•°æ®

### è®ºæ–‡æ•°æ®åº“
- âš ï¸ è®ºæ–‡æ•°é‡: 0ï¼ˆåˆå§‹çŠ¶æ€ï¼Œç­‰å¾…æŠ“å–ï¼‰
- âœ… è®¤è¯è¡¨æ­£å¸¸ï¼ˆauth_users, admin_usersç­‰ï¼‰
- âœ… å®šæ—¶ä»»åŠ¡ä¼šè‡ªåŠ¨æŠ“å–è®ºæ–‡æ•°æ®

---

## ğŸ”„ åç»­æ“ä½œ

### 1. ç›‘æ§æ•°æ®æ›´æ–°

```bash
# æ£€æŸ¥å®šæ—¶ä»»åŠ¡æ˜¯å¦è¿è¡Œ
journalctl -u embodiedpulse | grep -i "å®šæ—¶ä»»åŠ¡"

# æ£€æŸ¥è®ºæ–‡æŠ“å–è¿›åº¦
journalctl -u embodiedpulse | grep -i "è®ºæ–‡\|paper"

# æ£€æŸ¥Bç«™æ•°æ®æ›´æ–°
journalctl -u embodiedpulse | grep -i "bilibili\|Bç«™"
```

### 2. æ‰‹åŠ¨è§¦å‘æ•°æ®æŠ“å–

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /srv/EmbodiedPulse2026
source venv/bin/activate

# è§¦å‘è®ºæ–‡æŠ“å–
python3 -c "from fetch_new_data import fetch_papers; fetch_papers()"

# è§¦å‘Bç«™æ•°æ®æŠ“å–
python3 -c "from fetch_bilibili_data import fetch_and_save_up_data; fetch_and_save_up_data()"
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-12-17  
**ç»´æŠ¤è€…**: AI Assistant

