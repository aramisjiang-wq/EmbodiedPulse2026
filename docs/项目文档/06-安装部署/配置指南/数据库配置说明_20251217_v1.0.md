# æ•°æ®åº“é…ç½®è¯´æ˜

**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2025-12-17  
**ç›®çš„**: æ˜ç¡®å½“å‰æ•°æ®åº“é…ç½®çŠ¶æ€å’ŒPostgreSQLå‡çº§æ–¹æ¡ˆ

---

## ğŸ“Š å½“å‰æ•°æ®åº“çŠ¶æ€

### æœåŠ¡å™¨å®é™…é…ç½®

**å½“å‰ä½¿ç”¨**: SQLiteï¼ˆæœ¬åœ°æ–‡ä»¶æ•°æ®åº“ï¼‰

**åŸå› åˆ†æ**:
1. æœåŠ¡å™¨éƒ¨ç½²ä½¿ç”¨ **Gunicorn + systemd**ï¼ˆéDockerï¼‰
2. `.env` æ–‡ä»¶ä¸­ `DATABASE_URL` é»˜è®¤å€¼ä¸º `sqlite:///./papers.db`
3. ä»£ç æ”¯æŒPostgreSQLï¼Œä½†éœ€è¦æ˜¾å¼é…ç½®ç¯å¢ƒå˜é‡

### ä»£ç æ”¯æŒæƒ…å†µ

**ä»£ç å·²æ”¯æŒPostgreSQL**:
- âœ… `models.py` - æ”¯æŒPostgreSQLå’ŒSQLite
- âœ… `bilibili_models.py` - æ”¯æŒPostgreSQLå’ŒSQLite
- âœ… `jobs_models.py` - æ”¯æŒPostgreSQLå’ŒSQLite
- âœ… `news_models.py` - æ”¯æŒPostgreSQLå’ŒSQLite
- âœ… `datasets_models.py` - æ”¯æŒPostgreSQLå’ŒSQLite

**Dockeré…ç½®ä½¿ç”¨PostgreSQL**:
- âœ… `docker-compose.yml` - é…ç½®äº†PostgreSQLæœåŠ¡
- âš ï¸ ä½†æœåŠ¡å™¨å®é™…éƒ¨ç½²**æœªä½¿ç”¨Docker**

---

## ğŸ”„ PostgreSQLå‡çº§æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šåœ¨æœåŠ¡å™¨ä¸Šå®‰è£…PostgreSQLï¼ˆæ¨èï¼‰

**æ­¥éª¤**:

1. **å®‰è£…PostgreSQL**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
   apt update
   apt install -y postgresql postgresql-contrib
   
   # å¯åŠ¨æœåŠ¡
   systemctl start postgresql
   systemctl enable postgresql
   ```

2. **åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·**
   ```bash
   sudo -u postgres psql
   
   # åœ¨PostgreSQLå‘½ä»¤è¡Œä¸­æ‰§è¡Œ
   CREATE DATABASE embodied_pulse;
   CREATE USER embodied_user WITH PASSWORD 'your_password';
   GRANT ALL PRIVILEGES ON DATABASE embodied_pulse TO embodied_user;
   \q
   ```

3. **è¿ç§»æ•°æ®**
   ```bash
   cd /srv/EmbodiedPulse2026
   source venv/bin/activate
   
   # è®¾ç½®PostgreSQLè¿æ¥URL
   export DATABASE_URL=postgresql://embodied_user:your_password@localhost:5432/embodied_pulse
   
   # åˆå§‹åŒ–PostgreSQLè¡¨ç»“æ„
   python3 init_database.py
   
   # è¿ç§»SQLiteæ•°æ®åˆ°PostgreSQL
   python3 migrate_sqlite_to_postgresql.py
   ```

4. **æ›´æ–°.envæ–‡ä»¶**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘ .env
   nano /srv/EmbodiedPulse2026/.env
   
   # ä¿®æ”¹DATABASE_URL
   DATABASE_URL=postgresql://embodied_user:your_password@localhost:5432/embodied_pulse
   ```

5. **é‡å¯æœåŠ¡**
   ```bash
   systemctl restart embodiedpulse
   ```

### æ–¹æ¡ˆ2ï¼šç»§ç»­ä½¿ç”¨SQLiteï¼ˆå½“å‰æ–¹æ¡ˆï¼‰

**ä¼˜ç‚¹**:
- âœ… æ— éœ€å®‰è£…é¢å¤–æœåŠ¡
- âœ… é…ç½®ç®€å•
- âœ… é€‚åˆä¸­å°å‹é¡¹ç›®

**ç¼ºç‚¹**:
- âš ï¸ å¹¶å‘æ€§èƒ½æœ‰é™
- âš ï¸ ä¸é€‚åˆå¤§è§„æ¨¡æ•°æ®
- âš ï¸ å¤‡ä»½éœ€è¦å¤åˆ¶æ–‡ä»¶

**å½“å‰çŠ¶æ€**: SQLiteå·²æ»¡è¶³éœ€æ±‚ï¼ˆ14,873ç¯‡è®ºæ–‡ï¼Œ516ä¸ªè§†é¢‘ï¼‰

---

## ğŸ“ æ•°æ®åº“æ–‡ä»¶æ¸…å•

### å½“å‰æ•°æ®åº“æ–‡ä»¶

| æ•°æ®åº“æ–‡ä»¶ | å¤§å° | ç”¨é€” | çŠ¶æ€ |
|-----------|------|------|------|
| `papers.db` | 20MB | è®ºæ–‡æ•°æ®åº“ | âœ… ä¸»è¦æ•°æ®åº“ |
| `bilibili.db` | 432KB | Bç«™è§†é¢‘æ•°æ®åº“ | âœ… ä½¿ç”¨ä¸­ |
| `news.db` | 1.4MB | æ–°é—»æ•°æ®åº“ | âš ï¸ å¯é€‰ |
| `jobs.db` | 316KB | æ‹›è˜æ•°æ®åº“ | âš ï¸ å¯é€‰ |
| `datasets.db` | 32KB | æ•°æ®é›†æ•°æ®åº“ | âš ï¸ å¯é€‰ |
| `instance/papers.db` | 68KB | è®¤è¯æ•°æ®åº“ | âœ… Flask-SQLAlchemy |
| `hf_dataset_papers.db` | 28KB | HuggingFaceæ•°æ®é›† | âš ï¸ æµ‹è¯•/ä¸´æ—¶ |
| `humanoid_companies.db` | 204KB | äººå½¢æœºå™¨äººå…¬å¸ | âš ï¸ æµ‹è¯•/ä¸´æ—¶ |

### å¤‡ä»½æ–‡ä»¶

- `backups/` ç›®å½•ä¸‹çš„æ‰€æœ‰ `.db` æ–‡ä»¶ï¼ˆå·²é…ç½®ä¸ºä¸æ¨é€ï¼‰

---

## âš ï¸ é‡è¦æç¤º

### å½“å‰æœåŠ¡å™¨é…ç½®

**æœåŠ¡å™¨å®é™…ä½¿ç”¨**: SQLiteæ•°æ®åº“

**é…ç½®ä½ç½®**: `/srv/EmbodiedPulse2026/.env`
```bash
DATABASE_URL=sqlite:///./papers.db
```

**å¦‚éœ€å‡çº§åˆ°PostgreSQL**:
1. å®‰è£…PostgreSQLæœåŠ¡
2. åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
3. è¿ç§»æ•°æ®
4. æ›´æ–° `.env` é…ç½®
5. é‡å¯æœåŠ¡

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ•°æ®åº“è¿ç§»æŒ‡å—](./æ•°æ®åº“è¿ç§»æŒ‡å—.md)
- [æ•°æ®åº“è¿ç§»ç´§æ€¥ä¿®å¤æŒ‡å—](./æ•°æ®åº“è¿ç§»ç´§æ€¥ä¿®å¤æŒ‡å—_20251217_v1.0.md)
- [è´¦å·åŠé…ç½®ä¿¡æ¯æ¸…å•](./è´¦å·åŠé…ç½®ä¿¡æ¯æ¸…å•_20251217_v1.0.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-12-17  
**ç»´æŠ¤è€…**: AI Assistant

