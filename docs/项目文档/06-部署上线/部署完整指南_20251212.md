# éƒ¨ç½²å®Œæ•´æŒ‡å—

**æœ€åæ›´æ–°**ï¼š2025-12-12  
**ç‰ˆæœ¬**ï¼šv1.3.1

> ğŸ“‹ **æœ¬æ–‡æ¡£æ•´åˆäº†æ‰€æœ‰éƒ¨ç½²ç›¸å…³å†…å®¹ï¼ŒåŒ…æ‹¬è‡ªåŠ¨éƒ¨ç½²ã€æ‰‹åŠ¨éƒ¨ç½²ã€æ•…éšœä¿®å¤ç­‰**

---

## ğŸ“š ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [éƒ¨ç½²æ–¹å¼é€‰æ‹©](#éƒ¨ç½²æ–¹å¼é€‰æ‹©)
3. [GitHub Actionsè‡ªåŠ¨éƒ¨ç½²](#github-actionsè‡ªåŠ¨éƒ¨ç½²æ¨è)
4. [æœåŠ¡å™¨æ‰‹åŠ¨éƒ¨ç½²](#æœåŠ¡å™¨æ‰‹åŠ¨éƒ¨ç½²)
5. [æ•…éšœä¿®å¤æŒ‡å—](#æ•…éšœä¿®å¤æŒ‡å—)
6. [æœåŠ¡å™¨ä¿¡æ¯](#æœåŠ¡å™¨ä¿¡æ¯)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœåŠ¡å™¨ä¿¡æ¯
- **IPåœ°å€**ï¼š`115.190.77.57`
- **ç”¨æˆ·å**ï¼š`root`
- **å¯†ç **ï¼š`ash@2025`
- **æœåŠ¡åœ°å€**ï¼š`http://115.190.77.57:5001`

### æ¨èæ–¹å¼ï¼šGitHub Actionsè‡ªåŠ¨éƒ¨ç½²

**å·¥ä½œæµç¨‹**ï¼š
1. æœ¬åœ°ä¿®æ”¹ä»£ç 
2. `git push origin main`
3. GitHub Actionsè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨
4. æœåŠ¡è‡ªåŠ¨æ›´æ–°

**è®¾ç½®æ­¥éª¤**ï¼šè§ä¸‹æ–¹ [GitHub Actionsè‡ªåŠ¨éƒ¨ç½²](#github-actionsè‡ªåŠ¨éƒ¨ç½²æ¨è) ç« èŠ‚

---

## ğŸ“‹ éƒ¨ç½²æ–¹å¼é€‰æ‹©

| æ–¹å¼ | é€‚ç”¨åœºæ™¯ | æ¨èåº¦ |
|------|---------|--------|
| **GitHub Actionsè‡ªåŠ¨éƒ¨ç½²** | æ—¥å¸¸å¼€å‘ï¼Œä»£ç æ¨é€åè‡ªåŠ¨éƒ¨ç½² | â­â­â­â­â­ |
| **æœåŠ¡å™¨å®šæ—¶æ£€æŸ¥** | ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆï¼Œå®šæ—¶æ£€æŸ¥æ›´æ–° | â­â­â­ |
| **æ‰‹åŠ¨éƒ¨ç½²** | é¦–æ¬¡éƒ¨ç½²æˆ–ç´§æ€¥ä¿®å¤ | â­â­â­â­ |

---

## ğŸ”„ GitHub Actionsè‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

### å·¥ä½œåŸç†

1. æœ¬åœ°ä¿®æ”¹ä»£ç å¹¶æ¨é€åˆ°GitHub
2. GitHub Actionsæ£€æµ‹åˆ°pushäº‹ä»¶
3. è‡ªåŠ¨SSHè¿æ¥åˆ°æœåŠ¡å™¨
4. æ‹‰å–æœ€æ–°ä»£ç 
5. é‡æ–°æ„å»ºå¹¶å¯åŠ¨Dockerå®¹å™¨
6. æœåŠ¡è‡ªåŠ¨æ›´æ–°

### è®¾ç½®æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šåœ¨GitHubä»“åº“è®¾ç½®Secrets

**âš ï¸ é‡è¦**ï¼šç¡®ä¿åœ¨æ­£ç¡®çš„ä½ç½®æ·»åŠ Secretsï¼

1. æ‰“å¼€GitHubä»“åº“ï¼šhttps://github.com/aramisjiang-wq/EmbodiedPulse2026
2. ç‚¹å‡» **Settings**ï¼ˆè®¾ç½®ï¼‰
3. å·¦ä¾§èœå•æ‰¾åˆ° **Secrets and variables** â†’ **Actions** âš ï¸ **æ³¨æ„ï¼šä¸æ˜¯ SSH keys**
4. ç‚¹å‡» **New repository secret**ï¼Œä¾æ¬¡æ·»åŠ ï¼š

| Secretåç§° | å€¼ | è¯´æ˜ |
|-----------|-----|------|
| `SERVER_HOST` | `115.190.77.57` | æœåŠ¡å™¨IPåœ°å€ |
| `SERVER_USER` | `root` | SSHç”¨æˆ·å |
| `SERVER_PASSWORD` | `ash@2025` | SSHå¯†ç  |

**å¸¸è§é”™è¯¯**ï¼š
- âŒ åœ¨ **SSH keys** ä¸‹æ·»åŠ ï¼ˆè¿™é‡Œä¼šè¦æ±‚OpenSSHæ ¼å¼çš„å…¬é’¥ï¼‰
- âœ… åœ¨ **Secrets and variables â†’ Actions** ä¸‹æ·»åŠ ï¼ˆè¿™é‡Œæ·»åŠ çš„æ˜¯Secretsï¼‰

**å¦‚æœé‡åˆ°"Key is invalid"é”™è¯¯**ï¼š
- è¯´æ˜å¯èƒ½åœ¨é”™è¯¯çš„åœ°æ–¹æ·»åŠ äº†
- è¯·å‚è€ƒ [GitHub Actionså¯†é’¥é…ç½®æŒ‡å—_20251212.md](./GitHub Actionså¯†é’¥é…ç½®æŒ‡å—_20251212.md) è·å–è¯¦ç»†è¯´æ˜

#### ç¬¬äºŒæ­¥ï¼šéªŒè¯å·¥ä½œæµæ–‡ä»¶

å·¥ä½œæµæ–‡ä»¶ä½ç½®ï¼š`.github/workflows/auto-deploy.yml`

ç¡®è®¤æ–‡ä»¶å·²å­˜åœ¨å¹¶å·²æ¨é€åˆ°GitHubã€‚

#### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•è‡ªåŠ¨éƒ¨ç½²

1. **æ¨é€ä»£ç è§¦å‘éƒ¨ç½²**ï¼š
   ```bash
   git add .
   git commit -m "æµ‹è¯•è‡ªåŠ¨éƒ¨ç½²"
   git push origin main
   ```

2. **æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**ï¼š
   - è¿›å…¥GitHubä»“åº“ï¼šhttps://github.com/aramisjiang-wq/EmbodiedPulse2026
   - ç‚¹å‡» **Actions** æ ‡ç­¾
   - æŸ¥çœ‹ "Auto Deploy to Server" å·¥ä½œæµçš„æ‰§è¡ŒçŠ¶æ€

3. **éªŒè¯éƒ¨ç½²ç»“æœ**ï¼š
   - è®¿é—®ï¼šhttp://115.190.77.57:5001
   - ç¡®è®¤æœåŠ¡æ­£å¸¸è¿è¡Œ

### éƒ¨ç½²æµç¨‹

è®¾ç½®å®Œæˆåï¼Œæ¯æ¬¡éƒ¨ç½²æµç¨‹ï¼š

1. âœ… **æœ¬åœ°ä¿®æ”¹ä»£ç **
2. âœ… **æäº¤å¹¶æ¨é€**ï¼š
   ```bash
   git add .
   git commit -m "æ›´æ–°è¯´æ˜"
   git push origin main
   ```
3. âœ… **GitHub Actionsè‡ªåŠ¨è§¦å‘éƒ¨ç½²**
4. âœ… **æœåŠ¡å™¨è‡ªåŠ¨æ›´æ–°å¹¶é‡å¯æœåŠ¡**

---

## ğŸ–¥ï¸ æœåŠ¡å™¨æ‰‹åŠ¨éƒ¨ç½²

### é¦–æ¬¡éƒ¨ç½²

#### 1. SSHè¿æ¥åˆ°æœåŠ¡å™¨

```bash
ssh root@115.190.77.57
# å¯†ç : ash@2025
```

#### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Git
apt update && apt install -y git

# å®‰è£…Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
systemctl start docker
systemctl enable docker
rm get-docker.sh

# å®‰è£…Docker Compose
curl -L "https://github.com/docker/compose/releases/download/v2.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
```

#### 3. å…‹éš†é¡¹ç›®

```bash
cd /opt
git clone https://github.com/aramisjiang-wq/EmbodiedPulse2026.git EmbodiedPulse
cd EmbodiedPulse
```

#### 4. å¯åŠ¨æœåŠ¡

```bash
# æ„å»ºå¹¶å¯åŠ¨å®¹å™¨
docker-compose up -d --build

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 30

# åˆå§‹åŒ–æ•°æ®åº“
docker-compose exec -T web python3 init_database.py

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
curl -I http://localhost:5001
```

### æ›´æ–°éƒ¨ç½²

```bash
cd /opt/EmbodiedPulse

# æ‹‰å–æœ€æ–°ä»£ç 
git fetch origin main
git reset --hard origin/main
git clean -fd

# åœæ­¢æ—§å®¹å™¨
docker-compose down

# æ„å»ºå¹¶å¯åŠ¨æ–°å®¹å™¨
docker-compose up -d --build

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 30

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
curl -I http://localhost:5001
```

---

## ğŸ”§ æ•…éšœä¿®å¤æŒ‡å—

### 502 Bad Gatewayé”™è¯¯

**é—®é¢˜ç—‡çŠ¶**ï¼š
- è®¿é—® http://115.190.77.57:5001 è¿”å› 502 é”™è¯¯
- æœåŠ¡æ— æ³•è®¿é—®

**å¿«é€Ÿä¿®å¤**ï¼š

```bash
ssh root@115.190.77.57

# ä¸€é”®ä¿®å¤å‘½ä»¤
cd /opt/EmbodiedPulse && \
git fetch origin main && \
git reset --hard origin/main && \
git clean -fd && \
docker-compose down && \
docker-compose up -d --build && \
sleep 30 && \
docker-compose ps && \
curl -I http://localhost:5001
```

### Segmentation Faulté”™è¯¯

**é—®é¢˜ç—‡çŠ¶**ï¼š
- `docker-compose` å‘½ä»¤æ‰§è¡Œæ—¶å‡ºç° Segmentation fault

**ä¿®å¤æ–¹æ³•**ï¼š

```bash
# é‡æ–°å®‰è£…Docker Compose
rm -f /usr/local/bin/docker-compose
curl -L "https://github.com/docker/compose/releases/download/v2.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# éªŒè¯å®‰è£…
docker-compose --version
```

### Gitå‘½ä»¤æœªæ‰¾åˆ°

**é—®é¢˜ç—‡çŠ¶**ï¼š
- `Command 'git' not found`

**ä¿®å¤æ–¹æ³•**ï¼š

```bash
apt update && apt install -y git
```

### Docker Composeæƒé™é—®é¢˜

**é—®é¢˜ç—‡çŠ¶**ï¼š
- `docker-compose: Permission denied`

**ä¿®å¤æ–¹æ³•**ï¼š

```bash
chmod +x /usr/local/bin/docker-compose
```

### å®Œæ•´ä¿®å¤æµç¨‹

å¦‚æœé‡åˆ°å¤šä¸ªé—®é¢˜ï¼Œæ‰§è¡Œå®Œæ•´ä¿®å¤ï¼š

```bash
ssh root@115.190.77.57

# å®Œæ•´ä¿®å¤è„šæœ¬
cd /opt && \
rm -rf EmbodiedPulse && \
apt update && apt install -y git curl && \
curl -fsSL https://get.docker.com -o get-docker.sh && \
sh get-docker.sh && \
systemctl start docker && \
systemctl enable docker && \
rm get-docker.sh && \
curl -L "https://github.com/docker/compose/releases/download/v2.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose && \
chmod +x /usr/local/bin/docker-compose && \
git clone https://github.com/aramisjiang-wq/EmbodiedPulse2026.git EmbodiedPulse && \
cd EmbodiedPulse && \
docker-compose up -d --build && \
sleep 30 && \
docker-compose exec -T web python3 init_database.py && \
docker-compose ps && \
curl -I http://localhost:5001
```

---

## ğŸ“Š æœåŠ¡å™¨ä¿¡æ¯

### æœåŠ¡å™¨é…ç½®
- **IPåœ°å€**ï¼š115.190.77.57
- **ç”¨æˆ·å**ï¼šroot
- **å¯†ç **ï¼šash@2025
- **SSHç«¯å£**ï¼š22

### æœåŠ¡åœ°å€
- **WebæœåŠ¡**ï¼šhttp://115.190.77.57:5001
- **æ•°æ®åº“**ï¼šPostgreSQL (å†…éƒ¨ç«¯å£ 5432)

### é¡¹ç›®ç›®å½•
- **é¡¹ç›®è·¯å¾„**ï¼š`/opt/EmbodiedPulse`
- **Docker Composeæ–‡ä»¶**ï¼š`/opt/EmbodiedPulse/docker-compose.yml`

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—ï¼Ÿ

```bash
ssh root@115.190.77.57
cd /opt/EmbodiedPulse
docker-compose logs -f web
```

### Q2: å¦‚ä½•æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Ÿ

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose ps

# æ£€æŸ¥HTTPçŠ¶æ€
curl -I http://localhost:5001

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs --tail=50 web
```

### Q3: å¦‚ä½•é‡å¯æœåŠ¡ï¼Ÿ

```bash
cd /opt/EmbodiedPulse
docker-compose restart
```

### Q4: å¦‚ä½•æŸ¥çœ‹GitHub Actionséƒ¨ç½²çŠ¶æ€ï¼Ÿ

1. è®¿é—®ï¼šhttps://github.com/aramisjiang-wq/EmbodiedPulse2026/actions
2. æŸ¥çœ‹ "Auto Deploy to Server" å·¥ä½œæµ
3. ç‚¹å‡»è¿›å…¥æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### Q5: ä»£ç æ›´æ–°åæœåŠ¡æ²¡æœ‰è‡ªåŠ¨æ›´æ–°ï¼Ÿ

1. æ£€æŸ¥GitHub Actionsæ˜¯å¦æ‰§è¡ŒæˆåŠŸ
2. æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„ä»£ç æ˜¯å¦å·²æ›´æ–°ï¼š
   ```bash
   ssh root@115.190.77.57
   cd /opt/EmbodiedPulse
   git log --oneline -1
   ```
3. æ‰‹åŠ¨è§¦å‘éƒ¨ç½²ï¼ˆè§ä¸Šæ–¹æ‰‹åŠ¨éƒ¨ç½²ç« èŠ‚ï¼‰

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- [éƒ¨ç½²æ–¹æ¡ˆ_20251208.md](../03-æŠ€æœ¯æ–‡æ¡£/éƒ¨ç½²æ–¹æ¡ˆ_20251208.md) - è¯¦ç»†æŠ€æœ¯éƒ¨ç½²æ–¹æ¡ˆ
- [ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆ_20251210.md](../10-ä½¿ç”¨è¯´æ˜/ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆ_20251210.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è¯¦ç»†è¯´æ˜
- [GitHub Actionså·¥ä½œæµ](../.github/workflows/auto-deploy.yml) - è‡ªåŠ¨éƒ¨ç½²å·¥ä½œæµé…ç½®

---

**æœ€åæ›´æ–°**ï¼š2025-12-12  
**ç»´æŠ¤è€…**ï¼šAIå¼€å‘åŠ©æ‰‹

