# æœåŠ¡å™¨è„šæœ¬å‘½ä»¤æ‰‹å†Œ

**ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-12-19  
**æœ€åæ›´æ–°**: 2025-12-19  
**é€‚ç”¨ç¯å¢ƒ**: ç”Ÿäº§æœåŠ¡å™¨ `/srv/EmbodiedPulse2026`

---

## ğŸ“‹ ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [ä»£ç æ›´æ–°è„šæœ¬](#ä»£ç æ›´æ–°è„šæœ¬)
3. [æœåŠ¡ç®¡ç†è„šæœ¬](#æœåŠ¡ç®¡ç†è„šæœ¬)
4. [æ•°æ®æ£€æŸ¥è„šæœ¬](#æ•°æ®æ£€æŸ¥è„šæœ¬)
5. [æ•°æ®æ›´æ–°è„šæœ¬](#æ•°æ®æ›´æ–°è„šæœ¬)
6. [æ•…éšœæ’æŸ¥è„šæœ¬](#æ•…éšœæ’æŸ¥è„šæœ¬)
7. [Bç«™æ•°æ®è„šæœ¬](#bç«™æ•°æ®è„šæœ¬)
8. [æ•°æ®åº“è„šæœ¬](#æ•°æ®åº“è„šæœ¬)
9. [éƒ¨ç½²è„šæœ¬](#éƒ¨ç½²è„šæœ¬)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd /srv/EmbodiedPulse2026
```

### æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚éœ€è¦ï¼‰

```bash
source venv/bin/activate
```

### æŸ¥çœ‹è„šæœ¬åˆ—è¡¨

```bash
ls -la scripts/*.sh
ls -la scripts/*.py
```

---

## ğŸ”„ ä»£ç æ›´æ–°è„šæœ¬

### 1. æ ‡å‡†ä»£ç æ›´æ–°æµç¨‹

**è„šæœ¬**: `scripts/server_fix_standard_flow.sh`  
**åŠŸèƒ½**: ä¸€é”®æ‰§è¡Œæ ‡å‡†ä»£ç æ›´æ–°æµç¨‹

```bash
cd /srv/EmbodiedPulse2026
bash scripts/server_fix_standard_flow.sh
```

**æ‰§è¡Œå†…å®¹**:
1. æ‹‰å–æœ€æ–°ä»£ç  (`git pull origin main`)
2. æ£€æŸ¥ä»£ç è¯­æ³•
3. é‡å¯æœåŠ¡
4. æ£€æŸ¥æœåŠ¡çŠ¶æ€
5. æŸ¥çœ‹æ—¥å¿—

---

## ğŸ› ï¸ æœåŠ¡ç®¡ç†è„šæœ¬

### 1. å¯åŠ¨æœåŠ¡

**è„šæœ¬**: `scripts/start_server.sh`  
**åŠŸèƒ½**: å¯åŠ¨åº”ç”¨æœåŠ¡

```bash
bash scripts/start_server.sh
```

### 2. ä¿®å¤502é”™è¯¯

**è„šæœ¬**: `scripts/fix_502_error.sh`  
**åŠŸèƒ½**: ä¿®å¤502 Bad Gatewayé”™è¯¯

```bash
bash scripts/fix_502_error.sh
```

**æ‰§è¡Œå†…å®¹**:
- æ£€æŸ¥æœåŠ¡çŠ¶æ€
- æ£€æŸ¥Pythonè¯­æ³•é”™è¯¯
- é‡å¯æœåŠ¡
- éªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸

### 3. å¿«é€Ÿé‡å¯å¹¶æ£€æŸ¥

**è„šæœ¬**: `scripts/quick_restart_and_check.sh`  
**åŠŸèƒ½**: å¿«é€Ÿé‡å¯æœåŠ¡å¹¶æ£€æŸ¥çŠ¶æ€

```bash
bash scripts/quick_restart_and_check.sh
```

---

## ğŸ” æ•°æ®æ£€æŸ¥è„šæœ¬

### 1. æ•°æ®å¥åº·æ£€æŸ¥

**è„šæœ¬**: `scripts/data_health_check.py`  
**åŠŸèƒ½**: å…¨é¢æ£€æŸ¥æ•°æ®å¥åº·çŠ¶æ€

```bash
python3 scripts/data_health_check.py
```

**æ£€æŸ¥å†…å®¹**:
- è®ºæ–‡æ•°æ®å®Œæ•´æ€§
- æ–°é—»æ•°æ®å®Œæ•´æ€§
- æ‹›è˜æ•°æ®å®Œæ•´æ€§
- Bç«™æ•°æ®å®Œæ•´æ€§
- å®šæ—¶ä»»åŠ¡é…ç½®

### 2. æ•°æ®åº“è¿æ¥æ£€æŸ¥

**è„šæœ¬**: `scripts/check_database_connection_report.py`  
**åŠŸèƒ½**: æ£€æŸ¥æ•°æ®åº“è¿æ¥çŠ¶æ€

```bash
python3 scripts/check_database_connection_report.py
```

**è„šæœ¬**: `scripts/check_server_database_connection.sh`  
**åŠŸèƒ½**: æ£€æŸ¥æœåŠ¡å™¨æ•°æ®åº“è¿æ¥

```bash
bash scripts/check_server_database_connection.sh
```

### 3. éƒ¨ç½²çŠ¶æ€æ£€æŸ¥

**è„šæœ¬**: `scripts/check_deployment_status.sh`  
**åŠŸèƒ½**: æ£€æŸ¥éƒ¨ç½²çŠ¶æ€

```bash
bash scripts/check_deployment_status.sh
```

---

## ğŸ“Š æ•°æ®æ›´æ–°è„šæœ¬

### 1. æ›´æ–°æ‰€æœ‰æ’­æ”¾é‡

**è„šæœ¬**: `scripts/update_all_play_counts.sh`  
**åŠŸèƒ½**: æ›´æ–°æ‰€æœ‰Bç«™è§†é¢‘æ’­æ”¾é‡

```bash
bash scripts/update_all_play_counts.sh
```

**æ‰§è¡Œå†…å®¹**:
- è°ƒç”¨ `update_video_play_counts.py --force`
- éªŒè¯æ›´æ–°ç»“æœ

### 2. æ›´æ–°è§†é¢‘æ’­æ”¾é‡ï¼ˆPythonè„šæœ¬ï¼‰

**è„šæœ¬**: `scripts/update_video_play_counts.py`  
**åŠŸèƒ½**: æ›´æ–°è§†é¢‘æ’­æ”¾é‡æ•°æ®

```bash
# å¼ºåˆ¶æ›´æ–°æ‰€æœ‰è§†é¢‘
python3 scripts/update_video_play_counts.py --force

# åªæ›´æ–°ç‰¹å®šUPä¸»
python3 scripts/update_video_play_counts.py --uids 1172054289 --force

# å¢é‡æ›´æ–°ï¼ˆåªæ›´æ–°æœ€è¿‘7å¤©æœªæ›´æ–°çš„ï¼‰
python3 scripts/update_video_play_counts.py
```

**å‚æ•°è¯´æ˜**:
- `--force`: å¼ºåˆ¶æ›´æ–°æ‰€æœ‰è§†é¢‘ï¼Œä¸è€ƒè™‘ä¸Šæ¬¡æ›´æ–°æ—¶é—´
- `--uids`: æŒ‡å®šUPä¸»UIDåˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰

### 3. æ›´æ–°æ’­æ”¾é‡æ ¼å¼åŒ–å­—æ®µ

**è„šæœ¬**: `scripts/update_play_formatted.py`  
**åŠŸèƒ½**: æ›´æ–°æ’­æ”¾é‡æ ¼å¼åŒ–å­—æ®µ

```bash
python3 scripts/update_play_formatted.py
```

---

## ğŸ› æ•…éšœæ’æŸ¥è„šæœ¬

### 1. æ£€æŸ¥æœåŠ¡å™¨é”™è¯¯

**è„šæœ¬**: `scripts/check_server_errors_inline.sh`  
**åŠŸèƒ½**: å†…è”æ£€æŸ¥æœåŠ¡å™¨é”™è¯¯

```bash
bash scripts/check_server_errors_inline.sh
```

### 2. æ£€æŸ¥Bç«™é”™è¯¯

**è„šæœ¬**: `scripts/check_server_bilibili_errors.sh`  
**åŠŸèƒ½**: æ£€æŸ¥Bç«™ç›¸å…³é”™è¯¯

```bash
bash scripts/check_server_bilibili_errors.sh
```

**è¿œç¨‹æ£€æŸ¥**:
```bash
bash scripts/check_server_bilibili_errors_remote.sh
```

### 3. æ£€æŸ¥ä»»åŠ¡çŠ¶æ€

**è„šæœ¬**: `scripts/check_task_status.sh`  
**åŠŸèƒ½**: æ£€æŸ¥ä»»åŠ¡è¿è¡ŒçŠ¶æ€

```bash
bash scripts/check_task_status.sh
```

**è¿œç¨‹æ£€æŸ¥**:
```bash
bash scripts/check_task_status_remote.sh
```

### 4. ç»¼åˆè¯Šæ–­

**è„šæœ¬**: `scripts/comprehensive_diagnosis.sh`  
**åŠŸèƒ½**: ç»¼åˆè¯Šæ–­ç³»ç»Ÿé—®é¢˜

```bash
bash scripts/comprehensive_diagnosis.sh
```

---

## ğŸ“º Bç«™æ•°æ®è„šæœ¬

### 1. Bç«™æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

**è„šæœ¬**: `scripts/check_bilibili_data_integrity.sh`  
**åŠŸèƒ½**: æ£€æŸ¥Bç«™æ•°æ®å®Œæ•´æ€§

```bash
bash scripts/check_bilibili_data_integrity.sh
```

**Pythonç‰ˆæœ¬**:
```bash
python3 scripts/check_bilibili_data_integrity.py
```

**æ£€æŸ¥å†…å®¹**:
- UPä¸»æ•°æ®
- è§†é¢‘æ•°æ®
- æ•°æ®å…³è”
- æ•°æ®æ–°é²œåº¦

### 2. æ’­æ”¾é‡æ•°æ®æ£€æŸ¥

**è„šæœ¬**: `scripts/check_bilibili_play_counts.sh`  
**åŠŸèƒ½**: æ£€æŸ¥æ’­æ”¾é‡æ•°æ®ä¸€è‡´æ€§

```bash
bash scripts/check_bilibili_play_counts.sh
```

**æ£€æŸ¥å†…å®¹**:
- å¯¹æ¯”æ•°æ®åº“æ’­æ”¾é‡å’ŒBç«™APIæ’­æ”¾é‡
- æ˜¾ç¤ºä¸ä¸€è‡´çš„è§†é¢‘åˆ—è¡¨

### 3. æ•°æ®åº“é…ç½®æ£€æŸ¥

**è„šæœ¬**: `scripts/check_bilibili_database_config.sh`  
**åŠŸèƒ½**: æ£€æŸ¥Bç«™æ•°æ®åº“é…ç½®

```bash
bash scripts/check_bilibili_database_config.sh
```

**æ£€æŸ¥å†…å®¹**:
- ç¯å¢ƒå˜é‡é…ç½®
- `.env` æ–‡ä»¶é…ç½®
- Pythonä»£ç é…ç½®
- æ•°æ®åº“æ–‡ä»¶ä½ç½®

### 4. è‡ªåŠ¨æ›´æ–°é…ç½®æ£€æŸ¥

**è„šæœ¬**: `scripts/check_bilibili_auto_update.sh`  
**åŠŸèƒ½**: æ£€æŸ¥Bç«™æ•°æ®è‡ªåŠ¨æ›´æ–°é…ç½®

```bash
bash scripts/check_bilibili_auto_update.sh
```

**æ£€æŸ¥å†…å®¹**:
- ç¯å¢ƒå˜é‡é…ç½®
- å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨çŠ¶æ€
- æœåŠ¡çŠ¶æ€
- é…ç½®å»ºè®®

### 5. æ¸…é™¤Bç«™ç¼“å­˜

**è„šæœ¬**: `scripts/clear_bilibili_cache.sh`  
**åŠŸèƒ½**: æ¸…é™¤Bç«™APIç¼“å­˜

```bash
bash scripts/clear_bilibili_cache.sh
```

**Pythonç‰ˆæœ¬**:
```bash
python3 scripts/clear_bilibili_cache.py
```

### 6. å®Œæ•´æ•°æ®æµæ£€æŸ¥

**è„šæœ¬**: `scripts/check_bilibili_full_pipeline.sh`  
**åŠŸèƒ½**: æ£€æŸ¥Bç«™å®Œæ•´æ•°æ®æµ

```bash
bash scripts/check_bilibili_full_pipeline.sh
```

### 7. APIä¸æ•°æ®åº“å¯¹æ¯”

**è„šæœ¬**: `scripts/check_api_vs_database.sh`  
**åŠŸèƒ½**: å¯¹æ¯”APIè¿”å›æ•°æ®å’Œæ•°æ®åº“æ•°æ®

```bash
bash scripts/check_api_vs_database.sh
```

### 8. æµ‹è¯•Bç«™API

**è„šæœ¬**: `scripts/test_bilibili_apis.sh`  
**åŠŸèƒ½**: æµ‹è¯•Bç«™APIç«¯ç‚¹

```bash
bash scripts/test_bilibili_apis.sh
```

### 9. éªŒè¯æ’­æ”¾é‡æ›´æ–°

**è„šæœ¬**: `scripts/verify_play_counts_update.sh`  
**åŠŸèƒ½**: éªŒè¯æ’­æ”¾é‡æ›´æ–°ç»“æœ

```bash
bash scripts/verify_play_counts_update.sh
```

### 10. ä¿®å¤Bç«™æ•°æ®æµ

**è„šæœ¬**: `scripts/fix_bilibili_data_flow.sh`  
**åŠŸèƒ½**: ä¿®å¤Bç«™æ•°æ®æµé—®é¢˜

```bash
bash scripts/fix_bilibili_data_flow.sh
```

### 11. ä¿®å¤æ•°æ®åº“é…ç½®

**è„šæœ¬**: `scripts/fix_bilibili_database_config.sh`  
**åŠŸèƒ½**: ä¿®å¤Bç«™æ•°æ®åº“é…ç½®

```bash
bash scripts/fix_bilibili_database_config.sh
```

### 12. ä¿®å¤æœåŠ¡å™¨è§†é¢‘æ•°æ®

**è„šæœ¬**: `scripts/fix_server_video.sh`  
**åŠŸèƒ½**: ä¿®å¤æœåŠ¡å™¨è§†é¢‘æ•°æ®

```bash
bash scripts/fix_server_video.sh
```

### 13. æ£€æŸ¥æœåŠ¡å™¨è§†é¢‘æ•°æ®

**è„šæœ¬**: `scripts/check_server_video_data.sh`  
**åŠŸèƒ½**: æ£€æŸ¥æœåŠ¡å™¨è§†é¢‘æ•°æ®

```bash
bash scripts/check_server_video_data.sh
```

**ç®€åŒ–ç‰ˆæœ¬**:
```bash
bash scripts/check_server_video_simple.sh
```

### 14. æ›´æ–°æœåŠ¡å™¨è§†é¢‘æ’­æ”¾é‡

**è„šæœ¬**: `scripts/update_server_video_play.sh`  
**åŠŸèƒ½**: æ›´æ–°æœåŠ¡å™¨è§†é¢‘æ’­æ”¾é‡

```bash
bash scripts/update_server_video_play.sh
```

### 15. æ›´æ–°æœåŠ¡å™¨è§†é¢‘

**è„šæœ¬**: `scripts/update_video_on_server.sh`  
**åŠŸèƒ½**: æ›´æ–°æœåŠ¡å™¨è§†é¢‘æ•°æ®

```bash
bash scripts/update_video_on_server.sh
```

### 16. æ£€æŸ¥è§†é¢‘æ’­æ”¾é‡

**è„šæœ¬**: `scripts/check_video_play_counts.sh`  
**åŠŸèƒ½**: æ£€æŸ¥è§†é¢‘æ’­æ”¾é‡

```bash
bash scripts/check_video_play_counts.sh
```

### 17. æ£€æŸ¥è§†é¢‘æ›´æ–°çŠ¶æ€

**è„šæœ¬**: `scripts/check_video_update_status.py`  
**åŠŸèƒ½**: æ£€æŸ¥è§†é¢‘æ›´æ–°çŠ¶æ€

```bash
python3 scripts/check_video_update_status.py
```

---

## ğŸ’¾ æ•°æ®åº“è„šæœ¬

### 1. æ•°æ®åº“å¤‡ä»½

**è„šæœ¬**: `scripts/backup_databases.sh`  
**åŠŸèƒ½**: å¤‡ä»½æ‰€æœ‰æ•°æ®åº“

```bash
bash scripts/backup_databases.sh
```

### 2. æ£€æŸ¥å½“å‰æ•°æ®åº“

**è„šæœ¬**: `scripts/check_current_database.py`  
**åŠŸèƒ½**: æ£€æŸ¥å½“å‰ä½¿ç”¨çš„æ•°æ®åº“

```bash
python3 scripts/check_current_database.py
```

### 3. æ£€æŸ¥æœåŠ¡å™¨æ•°æ®åº“

**è„šæœ¬**: `scripts/check_server_database.sh`  
**åŠŸèƒ½**: æ£€æŸ¥æœåŠ¡å™¨æ•°æ®åº“çŠ¶æ€

```bash
bash scripts/check_server_database.sh
```

### 4. è¿ç§»æ•°æ®åº“

**è„šæœ¬**: `scripts/migrate_bilibili_from_sqlite.py`  
**åŠŸèƒ½**: ä»SQLiteè¿ç§»Bç«™æ•°æ®åˆ°PostgreSQL

```bash
python3 scripts/migrate_bilibili_from_sqlite.py
```

---

## ğŸš€ éƒ¨ç½²è„šæœ¬

### 1. éƒ¨ç½²åˆ°æœåŠ¡å™¨

**è„šæœ¬**: `scripts/deploy_to_server.sh`  
**åŠŸèƒ½**: éƒ¨ç½²ä»£ç åˆ°æœåŠ¡å™¨

```bash
bash scripts/deploy_to_server.sh
```

### 2. éƒ¨ç½²Bç«™é…ç½®åŠŸèƒ½

**è„šæœ¬**: `scripts/deploy_bilibili_config_feature.sh`  
**åŠŸèƒ½**: éƒ¨ç½²Bç«™é…ç½®åŠŸèƒ½

```bash
bash scripts/deploy_bilibili_config_feature.sh
```

### 3. éƒ¨ç½²è®ºæ–‡æ›´æ–°åŠŸèƒ½

**è„šæœ¬**: `scripts/deploy_paper_update_feature.sh`  
**åŠŸèƒ½**: éƒ¨ç½²è®ºæ–‡æ›´æ–°åŠŸèƒ½

```bash
bash scripts/deploy_paper_update_feature.sh
```

### 4. éªŒè¯éƒ¨ç½²

**è„šæœ¬**: `scripts/verify_deployment.sh`  
**åŠŸèƒ½**: éªŒè¯éƒ¨ç½²çŠ¶æ€

```bash
bash scripts/verify_deployment.sh
```

### 5. åˆ›å»ºsystemdæœåŠ¡

**è„šæœ¬**: `scripts/create_systemd_service.sh`  
**åŠŸèƒ½**: åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶

```bash
bash scripts/create_systemd_service.sh
```

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤ç»„åˆ

### æ—¥å¸¸ç»´æŠ¤

```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status embodiedpulse

# 2. æ£€æŸ¥æ•°æ®å¥åº·
python3 scripts/data_health_check.py

# 3. æ£€æŸ¥Bç«™æ•°æ®
bash scripts/check_bilibili_data_integrity.sh

# 4. æ£€æŸ¥è‡ªåŠ¨æ›´æ–°é…ç½®
bash scripts/check_bilibili_auto_update.sh
```

### é—®é¢˜æ’æŸ¥

```bash
# 1. æ£€æŸ¥æœåŠ¡é”™è¯¯
bash scripts/check_server_errors_inline.sh

# 2. æ£€æŸ¥Bç«™é”™è¯¯
bash scripts/check_server_bilibili_errors.sh

# 3. ç»¼åˆè¯Šæ–­
bash scripts/comprehensive_diagnosis.sh

# 4. æŸ¥çœ‹æ—¥å¿—
journalctl -u embodiedpulse -n 100 | grep -i error
```

### æ•°æ®æ›´æ–°

```bash
# 1. æ›´æ–°æ’­æ”¾é‡
bash scripts/update_all_play_counts.sh

# 2. éªŒè¯æ›´æ–°
bash scripts/verify_play_counts_update.sh

# 3. æ¸…é™¤ç¼“å­˜
bash scripts/clear_bilibili_cache.sh
```

### ä»£ç æ›´æ–°

```bash
# æ ‡å‡†æ›´æ–°æµç¨‹
bash scripts/server_fix_standard_flow.sh

# æˆ–æ‰‹åŠ¨æ‰§è¡Œ
cd /srv/EmbodiedPulse2026
git pull origin main
systemctl restart embodiedpulse
systemctl status embodiedpulse
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ‰§è¡Œå‰æ£€æŸ¥

- âœ… ç¡®è®¤åœ¨æ­£ç¡®çš„ç›®å½• (`/srv/EmbodiedPulse2026`)
- âœ… ç¡®è®¤æœ‰æ‰§è¡Œæƒé™ (`chmod +x scripts/*.sh`)
- âœ… ç¡®è®¤æœåŠ¡çŠ¶æ€æ­£å¸¸

### 2. å¤‡ä»½æ•°æ®

é‡è¦æ“ä½œå‰å»ºè®®å¤‡ä»½æ•°æ®åº“ï¼š
```bash
bash scripts/backup_databases.sh
```

### 3. æŸ¥çœ‹æ—¥å¿—

æ‰§è¡Œè„šæœ¬åæŸ¥çœ‹æ—¥å¿—ç¡®è®¤ç»“æœï¼š
```bash
journalctl -u embodiedpulse -n 50 --no-pager
```

### 4. æµ‹è¯•ç¯å¢ƒ

é‡è¦æ“ä½œå»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ã€‚

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æœåŠ¡å™¨æ“ä½œå®Œæ•´æŒ‡å—](../06-å®‰è£…éƒ¨ç½²/è¿ç»´ç®¡ç†/æœåŠ¡å™¨æ“ä½œå®Œæ•´æŒ‡å—.md)
- [Bç«™æ•°æ®é—®é¢˜å®Œæ•´è§£å†³æ–¹æ¡ˆ](../09-é—®é¢˜ä¿®å¤/Bç«™æ•°æ®é—®é¢˜å®Œæ•´è§£å†³æ–¹æ¡ˆ.md)
- [è„šæœ¬å‘½ä»¤å‚è€ƒæ‰‹å†Œ](./è„šæœ¬å‘½ä»¤å‚è€ƒæ‰‹å†Œ_20251217_v1.0.md)

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

**v1.0 (2025-12-19)**
- åˆå§‹ç‰ˆæœ¬
- æ•´ç†æœåŠ¡å™¨å¸¸ç”¨è„šæœ¬å‘½ä»¤
- æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡

---

**æœ€åæ›´æ–°**: 2025-12-19

