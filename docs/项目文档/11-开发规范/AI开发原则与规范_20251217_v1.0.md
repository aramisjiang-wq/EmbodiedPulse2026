# AI开发原则与规范

**文档版本**: v1.1  
**创建日期**: 2025-12-17  
**最后更新**: 2025-12-17  
**适用范围**: 所有由 AI 助手参与的 Web / 后端 / 数据类项目

---

## 📁 文档管理原则（适用于所有项目）

### 0. 文档存储位置（核心原则）

- **所有项目文档统一放在项目内的 `docs/项目文档/` 目录下**
- 不在 `docs/` 下随意新建零散目录（如 `docs/功能方案/`、`docs/部署文档/`），一律归入编号体系
- 所有文档按**产品开发流程顺序**编号：
  - `01-需求文档/`
  - `02-产品文档/`
  - `03-技术文档/`
  - `04-功能说明/`
  - `05-开发记录/`
  - `06-安装部署/`
  - `07-优化记录/`
  - `08-测试文档/`
  - `09-问题修复/`
  - `10-使用说明/`
  - `11-开发规范/`
  - `12-沟通记录/`

### 1. 一级分类职责（谁放哪里）

- **01-需求文档/**  
  - 只放「**是什么 & 为什么**」：PRD、用户需求分析、页面/模块级需求说明
  - 示例：`PRD_产品需求文档_YYYYMMDD_vX.Y.md`、`页面需求说明_用户中心_YYYYMMDD_vX.Y.md`
  - ❌ 不放实现细节、接口列表、任务拆解（这些属于功能说明 / 技术文档）

- **02-产品文档/**  
  - 产品定位、目标用户、AHA 时刻、产品故事、产品复盘

- **03-技术文档/**  
  - 整体技术方案、架构图、数据库设计、技术选型、SPEC 文档

- **04-功能说明/**  
  - 只放「**怎么做 & 具体行为规则 & 流程**」，是**实现层**说明
  - 内部分为两大类：
    1. **按产品/页面组织的功能说明**（Page-first）
    2. **按横切维度组织的总览说明**（Purpose-first，如 API、脚本、数据流转）

- **05-开发记录/**  
  - 开发过程中的阶段性记录、复盘、总结，最后尽量合并为少量归档文档

- **06-安装部署/**  
  - 环境准备、配置、部署步骤、运维脚本说明

- **07-优化记录/**  
  - UI / 功能 / 性能的优化过程与结果

- **08-测试文档/**  
  - 测试计划、测试用例、测试报告

- **09-问题修复/**  
  - 数据问题、功能问题、UI问题的分析与修复记录

- **10-使用说明/**  
  - 面向使用者的使用手册、快速上手指南

- **11-开发规范/**  
  - 像本文这样的规范、最佳实践

- **12-沟通记录/**  
  - 需求沟通、会议纪要、决策记录

---

## 🧩 功能说明组织原则（产品 → 页面 → 功能点）

> 这部分是你刚强调的核心意图，以后所有项目 **默认遵守**。

### 1. 产品层：区分「用户端」「管理端」等产品

在 `04-功能说明/页面功能/` 下，**第一层必须是产品维度**：

```text
04-功能说明/页面功能/
  ├─ 用户端/
  ├─ 管理端/
  ├─ （如有）运营端/
  └─ 功能方案/   # 跨产品的通用方案
```

- **用户端/**：面向终端用户的所有页面（例如具身论文页面、具身视频页面、用户中心、导航栏等）
- **管理端/**：面向运营/管理员的所有页面（例如管理平台、后台配置等）
- 如有需要，可以新增：`运营端/`、`合作方端/` 等产品维度

### 2. 页面层：产品下的页面

在产品文件夹下面，**第二层是页面**：

```text
04-功能说明/页面功能/用户端/
  ├─ 具身论文页面/
  ├─ 具身视频页面/
  ├─ 用户中心/
  └─ 导航栏/

04-功能说明/页面功能/管理端/
  └─ 管理平台/
      ├─ 论文管理页面/ （可选：将来细化）
      ├─ 视频管理页面/
      └─ 用户管理页面/
```

> 规则：**页面 = 用户眼里的一整块界面**，对应一个或多个路由（URL）。

### 3. 区块层：页面中的板块 / 模块

在页面文件夹下面，**第三层用子文件夹表达页面内的“区块/模块”**：

```text
用户端/具身论文页面/
  ├─ 刷新数据/          # 刷新按钮 + 进度条 + 状态轮询
  ├─ 论文标签体系/      # 标签、检索词、分类规则
  ├─ 新论文提示/        # 红点 & 计数规则
  ├─ 数据集信息挂窗/    # 右侧数据集挂件
  └─ 其他功能点...
```

- 每个子文件夹 = 一个**区块/模块**，例如：
  - `论文标签体系/`、`刷新数据/`、`新论文提示/` 等
- 区块下面的 `.md` 文件说明该区块的**所有细节**：
  - 行为规则
  - 前后端交互
  - 与数据/脚本/API 的对应关系

### 4. 功能点层：区块内的具体功能文档

在一个区块文件夹中，放多个具体功能说明文档：

```text
用户端/具身论文页面/论文标签体系/
  ├─ 论文标签体系_20251215.md
  ├─ 论文标签体系与检索词映射表_20251217_v1.0.md
  └─ 论文重新分类任务清单_20251217_v1.0.md

用户端/用户中心/飞书登录/
  ├─ 飞书登录系统任务清单_v2.0_20251217_v1.0.md
  └─ 飞书登录系统实现方案_v2.0_20251217_v1.0.md
```

> 规则：
> - 功能点文档 = 一个功能或一组密切相关功能的完整说明。
> - 描述清楚：需求落地方式、交互流程、依赖的API/脚本/数据表等。

### 5. README 使用原则

- **类别级别**（例如 `页面功能/`、`API接口/`、`命令行工具/`、`数据流转/`）可以有 `README.md` 作为索引
- **页面级、功能点级子文件夹一般不需要 README**，除非：
  - 内容复杂，需要一个总览导航
  - 或用户明确要求

> 默认策略：**宁少不多**。避免在每个叶子目录都放 README 带来噪音。

---

## 🎯 文档归类决策规则（AI 默认行为）

### 1. 需求 vs 功能说明 vs 技术文档

- 当文档是 **「要做什么 / 为什么做 / 用户视角」**：
  - 放到 `01-需求文档/`
  - 如：功能需求分析、页面需求说明、场景描述

- 当文档是 **「怎么做 / 功能行为规则 / 流程」**：
  - 放到 `04-功能说明/页面功能/...`
  - 并按「产品 → 页面 → 区块 → 功能点」挂在对应位置

- 当文档是 **「整体技术方案 / 架构 / 底层设计」**：
  - 放到 `03-技术文档/`
  - 如：SPEC、架构图、数据库设计

### 2. 横切维度（API、脚本、数据流转等）

- 当用户问题是：
  - “我想看所有命令行怎么用？”
  - “有哪些脚本？按用途怎么分？”
  - “某个页面从 API 到前端的数据流是什么样？”
  - “系统有哪些 API？请求/响应是什么样？”

- AI 必须维护并使用以下横切目录：
  - `04-功能说明/API接口/` - 按业务域分类 API（论文API/视频API/管理API/认证API 等）
  - `04-功能说明/命令行工具/` - 按用途分类脚本（数据抓取/数据检查/数据修复/部署/工具）
  - `04-功能说明/数据流转/` - 按数据源或业务域描述端到端数据流
  - `04-功能说明/数据抓取/` - 论文 / 视频 / 新闻 / 招聘等抓取逻辑
  - `04-功能说明/定时任务/` - 各定时任务配置与调度规则
  - `04-功能说明/第三方集成/` - ArXiv、B站、Semantic Scholar、飞书等集成说明

> **关键点**：页面功能文档（Page-first）和横切文档（Purpose-first）是互补的两种视角，AI 在整理和回答问题时要学会在两者之间切换。

---

## 🧾 命名规范（升级版）

### 1. 文档命名格式

- **标准格式**：`文档目的_YYYYMMDD_v主次版本号.md`
- 示例：
  - `具身论文页面功能说明_20251217_v1.0.md`
  - `飞书登录系统实现方案_v2.0_20251217_v1.0.md`
  - `论文标签体系与检索词映射表_20251217_v1.0.md`

### 2. 更新规则

- 文档内容有实质更新时：
  - 修改日期：`YYYYMMDD`
  - 如有必要，更新版本号：`v1.0 → v1.1` 等
- 旧版本如有价值可以保留，否则优先合并减少噪音

### 3. AI 的默认操作

- 生成新文档时：自动带上 **当天日期 + v1.0**
- 更新旧文档时：
  - 更新日期
  - 如改动较大，版本号 +0.1
- 发现命名不规范（无日期 / 无版本 / 重复 `_v1.0_v1.0`）时：
  - 自动改正，并在开发记录中写入说明

---

## 🤖 AI 在新项目中的默认行为

> 这一节是给「未来的我」的：以后接手任何新项目，默认按这些规则行动。

1. **初始化文档结构**：
   - 创建 `docs/项目文档/01-12` 编号目录
   - 创建基础索引文档（如 `docs/项目文档/README.md`）

2. **搭建功能说明骨架**：
   - 在 `04-功能说明/页面功能/` 下先按**产品维度**建：`用户端/`、`管理端/` 等
   - 在产品下按**页面**建子目录：如 `用户端/主页/`、`用户端/登录页面/`、`管理端/控制台/` 等
   - 在页面下按**区块/模块**建子目录：如 `登录表单/`、`统计卡片/` 等

3. **建立横切文档视角**：
   - `API接口/`、`命令行工具/`、`数据流转/`、`数据抓取/`、`定时任务/`、`第三方集成/`
   - 确保用户可以按「我要找所有 API / 所有脚本 / 数据流」的方式快速定位

4. **每次功能迭代时**：
   - 同步更新：PRD、SPEC、功能说明、CHANGELOG、使用说明、必要的测试文档
   - 若文档增长到多个同目的文件，及时合并为一份主文档 + 历史记录

5. **回答用户问题时**：
   - 如果问题是「某个页面/产品的功能/流程/数据流」→ 优先从 `04-功能说明/页面功能/...` 视角回答
   - 如果问题是「所有API/脚本/数据流/定时任务」→ 使用横切视角目录
   - 如当前结构不合理，**先自动重构文档结构，再继续工作**，并在开发记录中写明调整原因

---

**最后更新**：2025-12-17  
**维护者**：AI开发助手  
**版本**：v1.1
