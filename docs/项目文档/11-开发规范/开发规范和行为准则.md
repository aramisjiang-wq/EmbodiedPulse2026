# å¼€å‘è§„èŒƒå’Œè¡Œä¸ºå‡†åˆ™

## ğŸ¯ æ ¸å¿ƒåŸåˆ™ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰

### 1. ä»£ç ç®¡ç†åŸåˆ™

**âœ… å¿…é¡»éµå®ˆï¼š**
- æ‰€æœ‰ä»£ç ä¿®æ”¹å¿…é¡»å…ˆæäº¤åˆ°GitHub
- æœåŠ¡å™¨ä»£ç å¿…é¡»ä»GitHubæ‹‰å–ï¼ˆ`git pull origin main`ï¼‰
- ä½¿ç”¨æ ‡å‡†åŒ–çš„è„šæœ¬å’Œæµç¨‹
- è®°å½•æ‰€æœ‰æ“ä½œå’Œç»“æœ

**âŒ ä¸¥æ ¼ç¦æ­¢ï¼š**
- ç¦æ­¢ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šæ‰‹åŠ¨ç¼–è¾‘ä»£ç 
- ç¦æ­¢è·³è¿‡GitHubç›´æ¥ä¿®æ”¹æœåŠ¡å™¨ä»£ç 
- ç¦æ­¢ä¸æµ‹è¯•å°±é‡å¯æœåŠ¡
- ç¦æ­¢åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ `nano`ã€`vim` ç­‰ç¼–è¾‘å™¨ç›´æ¥ä¿®æ”¹ä»£ç 

### 2. ä¿®å¤æµç¨‹åŸåˆ™

**æ ‡å‡†æµç¨‹ï¼ˆå¿…é¡»éµå¾ªï¼‰ï¼š**

```
æœ¬åœ°ä¿®å¤ â†’ æäº¤GitHub â†’ æœåŠ¡å™¨æ‹‰å– â†’ éªŒè¯ â†’ é‡å¯ â†’ æµ‹è¯•
```

**æœåŠ¡å™¨ä¿®å¤æµç¨‹ï¼š**
```bash
cd /srv/EmbodiedPulse2026
bash scripts/server_fix_standard_flow.sh
```

### 3. è¯Šæ–­åŸåˆ™

**é‡åˆ°é—®é¢˜æ—¶ï¼š**
1. å…ˆæ‰§è¡Œè¯Šæ–­è„šæœ¬äº†è§£é—®é¢˜
2. æ ¹æ®è¯Šæ–­ç»“æœåˆ¶å®šä¿®å¤æ–¹æ¡ˆ
3. åœ¨æœ¬åœ°ä¿®å¤å¹¶æµ‹è¯•
4. æäº¤åˆ°GitHub
5. æœåŠ¡å™¨æ‹‰å–å¹¶åº”ç”¨ä¿®å¤

## ğŸ“‹ æ ‡å‡†æ“ä½œæµç¨‹

### ä¿®å¤ä»£ç é—®é¢˜

**æ­¥éª¤1: æœ¬åœ°ä¿®å¤**
```bash
# 1. ä¿®å¤ä»£ç 
# 2. æµ‹è¯•ä¿®å¤
python3 -m py_compile bilibili_models.py
python3 test_bilibili_issues.py

# 3. æäº¤åˆ°GitHub
git add .
git commit -m "ä¿®å¤æè¿°"
git push origin main
```

**æ­¥éª¤2: æœåŠ¡å™¨åº”ç”¨**
```bash
# SSHç™»å½•æœåŠ¡å™¨
ssh root@101.200.222.139
cd /srv/EmbodiedPulse2026

# æ‰§è¡Œæ ‡å‡†ä¿®å¤æµç¨‹
bash scripts/server_fix_standard_flow.sh
```

### è¯Šæ–­é—®é¢˜

**å¿…é¡»ä½¿ç”¨è¯Šæ–­è„šæœ¬ï¼š**
```bash
# å®Œæ•´è¯Šæ–­
bash scripts/full_bilibili_diagnosis.sh

# æˆ–å¿«é€Ÿæ£€æŸ¥
bash scripts/check_video_play_counts.sh
```

### æ›´æ–°æ•°æ®

**æ•°æ®æ›´æ–°æµç¨‹ï¼š**
```bash
# 1. æ£€æŸ¥æ•°æ®çŠ¶æ€
bash scripts/check_video_play_counts.sh

# 2. æ›´æ–°æ•°æ®
python3 fetch_bilibili_data.py --video-count 50

# 3. éªŒè¯æ›´æ–°
bash scripts/check_video_play_counts.sh
```

## ğŸš« ç¦æ­¢çš„æ“ä½œæ¸…å•

ä»¥ä¸‹æ“ä½œä¸¥æ ¼ç¦æ­¢ï¼š

1. âŒ åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ç¼–è¾‘ä»£ç æ–‡ä»¶
   ```bash
   # ç¦æ­¢
   nano /srv/EmbodiedPulse2026/bilibili_models.py
   vim /srv/EmbodiedPulse2026/auth_routes.py
   ```

2. âŒ è·³è¿‡GitHubç›´æ¥ä¿®æ”¹æœåŠ¡å™¨ä»£ç 
   ```bash
   # ç¦æ­¢
   # ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šä¿®æ”¹ä»£ç ï¼Œä¸æäº¤åˆ°GitHub
   ```

3. âŒ ä¸æµ‹è¯•å°±é‡å¯æœåŠ¡
   ```bash
   # ç¦æ­¢
   systemctl restart embodiedpulse  # æ²¡æœ‰å…ˆæ£€æŸ¥ä»£ç è¯­æ³•
   ```

4. âŒ ä¸æ‹‰å–æœ€æ–°ä»£ç å°±ä¿®å¤
   ```bash
   # ç¦æ­¢
   # ç›´æ¥ä¿®å¤ï¼Œä¸å…ˆæ‰§è¡Œ git pull
   ```

5. âŒ ä¸è®°å½•æ“ä½œå’Œç»“æœ
   ```bash
   # ç¦æ­¢
   # ä¿®æ”¹åä¸è®°å½•ä¿®æ”¹å†…å®¹å’Œç»“æœ
   ```

## âœ… å¿…é¡»æ‰§è¡Œçš„æ“ä½œæ¸…å•

æ¯æ¬¡ä¿®å¤å¿…é¡»ï¼š

1. âœ… **æœ¬åœ°ä¿®å¤å¹¶æµ‹è¯•**
   ```bash
   # ä¿®å¤ä»£ç 
   # æµ‹è¯•ä¿®å¤
   python3 -m py_compile bilibili_models.py
   ```

2. âœ… **æäº¤åˆ°GitHub**
   ```bash
   git add .
   git commit -m "ä¿®å¤æè¿°"
   git push origin main
   ```

3. âœ… **æœåŠ¡å™¨æ‹‰å–ä»£ç **
   ```bash
   cd /srv/EmbodiedPulse2026
   git pull origin main
   ```

4. âœ… **éªŒè¯ä»£ç æ›´æ–°**
   ```bash
   git log --oneline -1
   ```

5. âœ… **æ£€æŸ¥ä»£ç è¯­æ³•**
   ```bash
   python3 -m py_compile bilibili_models.py
   ```

6. âœ… **é‡å¯æœåŠ¡**
   ```bash
   systemctl restart embodiedpulse
   ```

7. âœ… **éªŒè¯ä¿®å¤**
   ```bash
   curl -s "http://localhost:5001/api/bilibili/all?force=1" | python3 -m json.tool | head -30
   ```

## ğŸ”§ æ ‡å‡†è„šæœ¬ä½¿ç”¨

### æœåŠ¡å™¨ä¿®å¤ï¼ˆæ¨èï¼‰

```bash
bash scripts/server_fix_standard_flow.sh
```

è‡ªåŠ¨å®Œæˆï¼šæ‹‰å–ä»£ç  â†’ éªŒè¯ â†’ é‡å¯ â†’ æµ‹è¯•

### å®Œæ•´è¯Šæ–­

```bash
bash scripts/full_bilibili_diagnosis.sh
```

æ£€æŸ¥ï¼šæœåŠ¡çŠ¶æ€ã€ä»£ç ã€æ•°æ®åº“ã€APIã€å®šæ—¶ä»»åŠ¡ã€ç¼“å­˜

### æ’­æ”¾é‡æ£€æŸ¥

```bash
bash scripts/check_video_play_counts.sh
```

æ£€æŸ¥ï¼šè§†é¢‘æ’­æ”¾é‡æ˜¯å¦æœ€æ–°

## ğŸ“ æ“ä½œè®°å½•è¦æ±‚

æ¯æ¬¡æ“ä½œå¿…é¡»è®°å½•ï¼š

1. **æ“ä½œæ—¶é—´**
2. **æ“ä½œå†…å®¹**
3. **æ“ä½œç»“æœ**
4. **é‡åˆ°çš„é—®é¢˜**
5. **è§£å†³æ–¹æ¡ˆ**

## ğŸ†˜ ç´§æ€¥æƒ…å†µå¤„ç†

å¦‚æœGitHubæš‚æ—¶ä¸å¯ç”¨ï¼š

1. **åˆ›å»ºå¤‡ä»½**
   ```bash
   cp bilibili_models.py bilibili_models.py.backup.$(date +%Y%m%d_%H%M%S)
   ```

2. **è®°å½•æ‰€æœ‰ä¿®æ”¹**
   - è®°å½•ä¿®æ”¹çš„æ–‡ä»¶
   - è®°å½•ä¿®æ”¹çš„å†…å®¹
   - è®°å½•ä¿®æ”¹çš„åŸå› 

3. **GitHubæ¢å¤åç«‹å³æäº¤**
   ```bash
   git add .
   git commit -m "ç´§æ€¥ä¿®å¤: æè¿°"
   git push origin main
   ```

## ğŸ“ AIåŠ©æ‰‹è¡Œä¸ºå‡†åˆ™

ä½œä¸ºAIåŠ©æ‰‹ï¼Œæˆ‘å¿…é¡»éµå®ˆä»¥ä¸‹å‡†åˆ™ï¼š

1. **æ°¸è¿œå»ºè®®ä»GitHubæ‹‰å–ä»£ç **
   - ä»»ä½•ä¿®å¤å»ºè®®éƒ½å¿…é¡»åŒ…å« `git pull origin main`
   - ç¦æ­¢å»ºè®®ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘ä»£ç 

2. **æ°¸è¿œä½¿ç”¨æ ‡å‡†è„šæœ¬**
   - æ¨èä½¿ç”¨ `scripts/server_fix_standard_flow.sh`
   - ç¦æ­¢å»ºè®®æ‰‹åŠ¨æ‰§è¡Œä¿®å¤æ­¥éª¤

3. **æ°¸è¿œå…ˆè¯Šæ–­åä¿®å¤**
   - é‡åˆ°é—®é¢˜å…ˆæ‰§è¡Œè¯Šæ–­è„šæœ¬
   - æ ¹æ®è¯Šæ–­ç»“æœåˆ¶å®šä¿®å¤æ–¹æ¡ˆ

4. **æ°¸è¿œè®°å½•æ“ä½œ**
   - è®°å½•æ‰€æœ‰å»ºè®®çš„æ“ä½œ
   - è®°å½•é¢„æœŸç»“æœ

5. **æ°¸è¿œéªŒè¯ä¿®å¤**
   - ä¿®å¤åå¿…é¡»éªŒè¯
   - æä¾›éªŒè¯å‘½ä»¤

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `README_BILIBILI_FIX.md` - Bç«™æ•°æ®é—®é¢˜ä¿®å¤æµç¨‹
- `scripts/server_fix_standard_flow.sh` - æ ‡å‡†ä¿®å¤æµç¨‹è„šæœ¬
- `scripts/full_bilibili_diagnosis.sh` - å®Œæ•´è¯Šæ–­è„šæœ¬

## ğŸ”„ æ›´æ–°è®°å½•

- 2025-12-19: åˆ›å»ºå¼€å‘è§„èŒƒæ–‡æ¡£
- 2025-12-19: æ·»åŠ æ ¸å¿ƒåŸåˆ™å’Œè¡Œä¸ºå‡†åˆ™

