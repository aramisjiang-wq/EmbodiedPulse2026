<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理仪表盘 - Embodied Pulse Admin</title>
    <link rel="stylesheet" href="/static/css/admin.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
    <!-- 侧边栏 -->
    <aside class="admin-sidebar">
        <div class="sidebar-header">
            <h2>Embodied Admin</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="/admin/dashboard" class="nav-item active">
                <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
                仪表盘
            </a>
            <a href="/admin/users" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20">
                    <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                </svg>
                用户管理
            </a>
            <a href="/admin/papers" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20">
                    <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                </svg>
                论文管理
            </a>
            <a href="/admin/bilibili" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20">
                    <path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15h2v-2h2v-2h-2V9H8v2H6v2h2z"/>
                </svg>
                视频管理
            </a>
            <a href="/admin/logs" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20">
                    <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
                日志监控
            </a>
            <a href="/" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
                返回网站
            </a>
        </nav>
        <div class="sidebar-footer">
            <button id="logout-btn" class="btn-logout">
                <svg viewBox="0 0 24 24" width="18" height="18">
                    <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                </svg>
                退出登录
            </button>
        </div>
    </aside>
    
    <!-- 主内容区 -->
    <main class="admin-main">
        <!-- 顶部栏 -->
        <header class="admin-header">
            <h1>仪表盘</h1>
            <div class="header-right">
                <span class="admin-user-name" id="admin-user-name">加载中...</span>
            </div>
        </header>
        
        <!-- 统计卡片 -->
        <section class="stats-section">
            <div class="stat-card card-primary">
                <div class="stat-icon">
                    <svg viewBox="0 0 24 24" width="32" height="32">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="stat-total-users">0</div>
                    <div class="stat-label">总用户数</div>
                    <div class="stat-change">
                        <span id="stat-new-users-today">0</span> 今日新增
                    </div>
                </div>
            </div>
            
            <div class="stat-card card-success">
                <div class="stat-icon">
                    <svg viewBox="0 0 24 24" width="32" height="32">
                        <path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="stat-active-users">0</div>
                    <div class="stat-label">活跃用户</div>
                    <div class="stat-change">
                        <span id="stat-active-users-today">0</span> 今日活跃
                    </div>
                </div>
            </div>
            
            <div class="stat-card card-info">
                <div class="stat-icon">
                    <svg viewBox="0 0 24 24" width="32" height="32">
                        <path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="stat-total-logins">0</div>
                    <div class="stat-label">总登录次数</div>
                    <div class="stat-change">
                        <span id="stat-logins-today">0</span> 今日登录
                    </div>
                </div>
            </div>
            
            <div class="stat-card card-warning">
                <div class="stat-icon">
                    <svg viewBox="0 0 24 24" width="32" height="32">
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="stat-total-access">0</div>
                    <div class="stat-label">总访问次数</div>
                    <div class="stat-change">
                        <span id="stat-access-today">0</span> 今日访问
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 图表区域 -->
        <section class="charts-section">
            <div class="chart-container">
                <h3 class="chart-title">用户增长趋势（近30天）</h3>
                <canvas id="usersChart"></canvas>
            </div>
            <div class="chart-container">
                <h3 class="chart-title">登录活跃度（近30天）</h3>
                <canvas id="loginsChart"></canvas>
            </div>
        </section>
        
        <!-- 分布图表 -->
        <section class="charts-section">
            <div class="chart-container chart-small">
                <h3 class="chart-title">用户类型分布</h3>
                <canvas id="userTypeChart"></canvas>
            </div>
            <div class="chart-container chart-small">
                <h3 class="chart-title">用户角色分布</h3>
                <canvas id="roleChart"></canvas>
            </div>
        </section>
        
        <!-- 最近活动 -->
        <section class="activity-section">
            <h3 class="section-title">最近活动</h3>
            <div class="activity-list" id="recent-activity">
                <p class="loading-text">加载中...</p>
            </div>
        </section>
    </main>
    
    <!-- Toast提示 -->
    <div id="toast" class="toast"></div>
    
    <script src="/static/js/admin_dashboard.js"></script>
</body>
</html>

