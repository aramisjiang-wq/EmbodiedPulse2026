# 飞书登录系统 - 浏览器测试指南

## 🎯 快速开始

### 1. 确认Flask应用正在运行
```bash
# 检查应用是否运行
lsof -ti:5001

# 如果没有运行，启动应用
cd "/Users/dong/Documents/Cursor/Embodied Pulse"
python3 app.py
```

---

## 📋 测试清单

### ✅ 一、管理端测试（无需飞书配置）

#### 1.1 管理员登录
**访问**: http://localhost:5001/admin/login

**测试步骤**:
1. 在浏览器中打开上述链接
2. 输入用户名: `limx`
3. 输入密码: `limx123456`
4. 点击"登录"按钮
5. ✅ 应该跳转到管理仪表盘

**预期结果**:
- 登录表单渲染正常
- 输入框样式正常
- 登录按钮可点击
- 成功登录后跳转到 `/admin/dashboard`

---

#### 1.2 管理仪表盘
**访问**: http://localhost:5001/admin/dashboard
（登录后自动跳转，或直接访问）

**测试步骤**:
1. 查看页面布局
2. 检查4个统计卡片是否显示
3. 查看图表是否渲染（Chart.js）
4. 检查最近活动列表

**预期结果**:
- ✅ 页面布局完整
- ✅ 统计卡片显示：
  - 总用户数: 0
  - 今日新增: 0
  - 今日登录: 1
  - 今日访问: 0
- ✅ 图表渲染正常
- ✅ 侧边栏显示正常

---

#### 1.3 用户管理页面
**访问**: http://localhost:5001/admin/users

**测试步骤**:
1. 点击侧边栏"用户管理"
2. 查看用户列表（应为空）
3. 测试搜索和筛选功能
4. 检查分页控件

**预期结果**:
- ✅ 页面渲染正常
- ✅ 表格显示"暂无用户数据"
- ✅ 搜索框和筛选器正常
- ✅ 批量操作按钮已禁用

---

#### 1.4 日志监控页面
**访问**: http://localhost:5001/admin/logs

**测试步骤**:
1. 点击侧边栏"日志监控"
2. 查看"登录日志"Tab
3. 切换到"访问日志"Tab
4. 测试筛选功能

**预期结果**:
- ✅ 页面渲染正常
- ✅ Tab切换正常
- ✅ 登录日志显示1条记录（limx登录）
- ✅ 访问日志为空或显示当前访问

---

#### 1.5 退出登录
**测试步骤**:
1. 点击侧边栏底部"退出登录"按钮
2. 确认跳转到登录页面
3. 尝试访问 `/admin/dashboard`
4. 确认被重定向到登录页面

**预期结果**:
- ✅ 成功退出登录
- ✅ 清除Token
- ✅ 需要重新登录才能访问管理页面

---

### 🔄 二、用户端测试（需飞书配置）

#### 2.1 飞书登录页面
**访问**: http://localhost:5001/login

**测试步骤**:
1. 在浏览器中打开上述链接
2. 查看页面布局
3. 检查飞书扫码登录组件

**当前状态**: 🔄 需要配置飞书OAuth才能完整测试

**如需测试，请先配置**:
1. 创建 `.env` 文件
2. 添加飞书配置:
```bash
FEISHU_APP_ID=cli_a6727c4ffc71d00b
FEISHU_APP_SECRET=dt7LyzH6HOexxH4z9ssXpghYgE8PIvSI
FEISHU_REDIRECT_URI=http://localhost:5001/api/auth/feishu/callback
JWT_SECRET_KEY=your-secret-key-here
```
3. 重启Flask应用

---

#### 2.2 个人中心
**访问**: http://localhost:5001/profile

**测试步骤**:
1. （需先通过飞书登录）
2. 查看个人信息
3. 测试Tab切换
4. 查看登录历史
5. 查看访问记录

**当前状态**: 🔄 需要先通过飞书登录

---

## 🔍 三、详细验证项

### 3.1 页面渲染
- [ ] HTML结构完整
- [ ] CSS样式加载正常
- [ ] JavaScript加载正常
- [ ] 无404错误（检查浏览器控制台）

### 3.2 交互功能
- [ ] 按钮可点击
- [ ] 表单可提交
- [ ] 模态框可打开/关闭
- [ ] Tab切换正常
- [ ] 分页功能正常

### 3.3 数据展示
- [ ] API数据正确获取
- [ ] 数据渲染正确
- [ ] 图表显示正常
- [ ] 统计数字准确

### 3.4 权限控制
- [ ] 未登录无法访问管理页面
- [ ] Token过期自动跳转登录
- [ ] 普通用户无法访问管理端
- [ ] 超级管理员有完整权限

---

## 🐛 四、常见问题

### 4.1 页面无法访问
**现象**: 浏览器显示"无法连接"

**解决方案**:
```bash
# 检查Flask应用是否运行
lsof -ti:5001

# 如果没有运行，启动应用
python3 app.py
```

### 4.2 页面404错误
**现象**: 页面显示"404 Not Found"

**解决方案**:
- 检查templates文件夹是否存在
- 检查HTML文件是否存在
- 查看app.py中的路由配置

### 4.3 API调用失败
**现象**: 浏览器控制台显示API错误

**解决方案**:
- 检查Token是否有效
- 查看app.log日志
- 确认数据库是否初始化

### 4.4 图表不显示
**现象**: Chart.js图表不渲染

**解决方案**:
- 检查Chart.js CDN是否加载
- 查看浏览器控制台错误
- 确认API数据是否返回

---

## 📊 五、测试数据参考

### 5.1 初始状态数据
- **总用户数**: 0（不含管理员）
- **管理员数**: 1（limx）
- **登录历史**: 1条（limx的登录记录）
- **访问日志**: 测试访问产生的记录

### 5.2 测试账号
```
管理员账号:
  用户名: limx
  密码: limx123456
  角色: 超级管理员
  权限: 全部权限
```

---

## ✅ 六、验收标准

### 6.1 管理端（必须）
- ✅ 登录页面正常显示和登录成功
- ✅ 管理仪表盘正常显示统计数据
- ✅ 用户管理页面正常渲染
- ✅ 日志监控页面正常显示
- ✅ 退出登录功能正常

### 6.2 用户端（可选）
- 🔄 登录页面正常显示
- 🔄 飞书OAuth流程正常（需配置）
- 🔄 个人中心正常显示（需登录）

### 6.3 性能标准
- 页面加载时间 < 2秒
- API响应时间 < 500ms
- 无JavaScript错误
- 无CSS样式错乱

---

## 🚀 七、快速测试命令

```bash
# 1. 启动Flask应用（如果未运行）
cd "/Users/dong/Documents/Cursor/Embodied Pulse"
python3 app.py

# 2. 在新终端窗口，打开浏览器测试
open http://localhost:5001/admin/login
open http://localhost:5001/admin/dashboard
open http://localhost:5001/admin/users
open http://localhost:5001/admin/logs
open http://localhost:5001/login
open http://localhost:5001/profile

# 3. 查看应用日志
tail -f app.log

# 4. 停止应用
lsof -ti:5001 | xargs kill -9
```

---

## 📝 八、测试报告模板

测试完成后，请记录以下信息：

### 管理登录页面
- [ ] 页面渲染: 正常/异常
- [ ] 登录功能: 成功/失败
- [ ] 错误提示: 正常/异常

### 管理仪表盘
- [ ] 页面布局: 正常/异常
- [ ] 统计卡片: 正常/异常
- [ ] 图表显示: 正常/异常

### 用户管理
- [ ] 列表显示: 正常/异常
- [ ] 搜索筛选: 正常/异常
- [ ] 详情/编辑: 正常/异常

### 日志监控
- [ ] Tab切换: 正常/异常
- [ ] 日志列表: 正常/异常
- [ ] 筛选功能: 正常/异常

### 问题记录
- 问题1: [描述]
- 问题2: [描述]

---

**祝测试顺利！** 🎉

如有问题，请查看 `app.log` 日志文件或测试报告。

