# 管理端论文和视频管理页面测试指南

## 一、测试前准备

### 1. 确保服务器运行
```bash
# 启动Flask服务器
python3 app.py
# 或
flask run --port 5001
```

### 2. 确保已登录管理员账号
- 访问 `/admin/login` 登录
- 或使用飞书扫码登录
- 确保账号具有 `admin` 或 `super_admin` 权限

---

## 二、测试论文管理页面

### 访问地址
```
http://localhost:5001/admin/papers
```

### 测试项目

#### 1. 页面加载测试
- [ ] 页面能正常加载
- [ ] 侧边栏显示"论文管理"为激活状态
- [ ] 统计卡片显示数据（总论文数、今日新增、平均引用数、类别数）
- [ ] 论文列表正常显示

#### 2. 搜索功能测试
- [ ] 在搜索框输入关键词（如"robot"），点击"搜索"
- [ ] 列表应该只显示包含该关键词的论文
- [ ] 测试搜索标题、作者、摘要

#### 3. 筛选功能测试
- [ ] 选择类别筛选，列表应该只显示该类别论文
- [ ] 选择日期范围（开始日期、结束日期）
- [ ] 输入最小引用数，列表应该只显示引用数>=该值的论文
- [ ] 点击"重置"按钮，所有筛选条件应该清空

#### 4. 分页功能测试
- [ ] 如果论文数量超过20篇，应该显示分页控件
- [ ] 点击"上一页"、"下一页"按钮
- [ ] 点击页码，应该跳转到对应页面

#### 5. 论文详情测试
- [ ] 点击论文行的"查看"按钮（眼睛图标）
- [ ] 应该弹出模态框显示论文详情
- [ ] 详情包括：ID、标题、作者、发布日期、类别、引用数、摘要、PDF链接、代码链接等
- [ ] 点击模态框外部或关闭按钮，模态框应该关闭

#### 6. 编辑功能测试
- [ ] 点击论文行的"编辑"按钮（铅笔图标）
- [ ] 应该弹出编辑模态框
- [ ] 修改标题、类别、代码链接
- [ ] 点击"保存"按钮
- [ ] 应该显示成功提示，列表应该更新

#### 7. 删除功能测试
- [ ] 点击论文行的"删除"按钮（垃圾桶图标）
- [ ] 应该弹出确认对话框
- [ ] 点击"确定"，论文应该被删除
- [ ] 列表应该更新，删除的论文不再显示

#### 8. 复选框功能测试
- [ ] 点击表格第一行的全选复选框
- [ ] 所有论文的复选框应该被选中
- [ ] 再次点击，应该取消全选
- [ ] 点击单个论文的复选框，应该选中/取消选中该论文

---

## 三、测试视频管理页面

### 访问地址
```
http://localhost:5001/admin/bilibili
```

### 测试项目

#### 1. 页面加载测试
- [ ] 页面能正常加载
- [ ] 侧边栏显示"视频管理"为激活状态
- [ ] 默认显示"UP主列表"Tab
- [ ] 统计卡片显示数据（总UP主数、总视频数、总播放量、今日新增）

#### 2. Tab切换测试
- [ ] 点击"UP主列表"Tab，应该显示UP主列表
- [ ] 点击"视频列表"Tab，应该显示视频列表
- [ ] Tab按钮应该有激活状态（高亮显示）

#### 3. UP主列表测试
- [ ] UP主列表正常显示（UID、名称、粉丝数、视频数、总播放量、最后更新）
- [ ] 在搜索框输入UP主名称，点击"搜索"
- [ ] 列表应该只显示匹配的UP主
- [ ] 点击"查看"按钮，应该显示UP主详情
- [ ] 分页功能正常

#### 4. 视频列表测试
- [ ] 切换到"视频列表"Tab
- [ ] 视频列表正常显示（BV号、标题、UP主、发布时间、播放量、评论数、收藏数）
- [ ] UP主筛选下拉框应该显示所有UP主
- [ ] 选择UP主，列表应该只显示该UP主的视频
- [ ] 选择日期范围，列表应该只显示该日期范围内的视频
- [ ] 输入最小播放量，列表应该只显示播放量>=该值的视频
- [ ] 点击"查看"按钮，应该显示视频详情
- [ ] 分页功能正常

#### 5. 搜索和筛选测试
- [ ] 在搜索框输入关键词，点击"搜索"
- [ ] 列表应该只显示匹配的结果
- [ ] 点击"重置"按钮，所有筛选条件应该清空

---

## 四、常见问题排查

### 1. 页面无法加载
- **检查**：服务器是否运行
- **检查**：是否已登录管理员账号
- **检查**：浏览器控制台是否有错误信息

### 2. 数据不显示
- **检查**：数据库中是否有数据
- **检查**：API端点是否正常（打开浏览器开发者工具，查看Network标签）
- **检查**：后端日志是否有错误信息

### 3. API返回401错误
- **原因**：未登录或token过期
- **解决**：重新登录

### 4. API返回500错误
- **检查**：后端日志查看具体错误
- **检查**：数据库连接是否正常
- **检查**：模型导入是否正确

### 5. 模态框不显示
- **检查**：浏览器控制台是否有JavaScript错误
- **检查**：CSS样式是否正确加载

---

## 五、测试检查清单

### 论文管理页面
- [ ] 页面加载正常
- [ ] 统计信息显示正确
- [ ] 列表显示正常
- [ ] 搜索功能正常
- [ ] 筛选功能正常
- [ ] 分页功能正常
- [ ] 详情查看正常
- [ ] 编辑功能正常
- [ ] 删除功能正常
- [ ] 复选框功能正常

### 视频管理页面
- [ ] 页面加载正常
- [ ] Tab切换正常
- [ ] UP主列表显示正常
- [ ] 视频列表显示正常
- [ ] 搜索功能正常
- [ ] 筛选功能正常
- [ ] 分页功能正常
- [ ] 详情查看正常

---

## 六、测试数据准备

### 论文数据
- 确保数据库中有论文数据
- 可以通过访问 `/api/papers` 检查

### 视频数据
- 确保数据库中有UP主和视频数据
- 可以通过访问 `/api/bilibili/all` 检查

---

## 七、性能测试

### 大数据量测试
- [ ] 测试1000+论文的列表加载速度
- [ ] 测试1000+视频的列表加载速度
- [ ] 测试搜索和筛选的响应速度

### 并发测试
- [ ] 多个用户同时访问页面
- [ ] 检查是否有性能问题

---

## 八、浏览器兼容性测试

- [ ] Chrome/Edge（推荐）
- [ ] Firefox
- [ ] Safari

---

## 九、移动端测试（可选）

- [ ] 在移动设备上访问页面
- [ ] 检查响应式布局是否正常

---

## 十、测试报告

测试完成后，请记录：
1. 测试日期和时间
2. 测试环境（浏览器、操作系统）
3. 发现的问题
4. 问题严重程度（严重/中等/轻微）
5. 问题截图（如有）

---

## 快速测试命令

### 检查API端点
```bash
# 检查论文统计API（需要先登录获取token）
curl -H "Authorization: Bearer YOUR_TOKEN" http://localhost:5001/api/admin/papers/stats

# 检查视频统计API
curl -H "Authorization: Bearer YOUR_TOKEN" http://localhost:5001/api/admin/bilibili/stats
```

### 检查数据库
```bash
# 检查论文数量
python3 -c "from models import get_session, Paper; s = get_session(); print(s.query(Paper).count()); s.close()"

# 检查UP主数量
python3 -c "from bilibili_models import get_bilibili_session, BilibiliUp; s = get_bilibili_session(); print(s.query(BilibiliUp).count()); s.close()"
```

---

## 注意事项

1. **权限要求**：只有管理员账号才能访问这些页面
2. **数据安全**：删除操作不可恢复，请谨慎测试
3. **性能考虑**：大数据量时，分页和筛选可能需要一些时间
4. **浏览器缓存**：如果页面没有更新，尝试清除浏览器缓存或使用无痕模式

---

祝测试顺利！如有问题，请查看浏览器控制台和后端日志。

